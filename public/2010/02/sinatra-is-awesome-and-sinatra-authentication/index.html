<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:87.5%/1.714 'Open Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.73);font-family:'Open Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}ul{margin-left:1.714rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;list-style-position:outside;list-style-image:none;list-style:disc outside;}ol{margin-left:1.714rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;list-style-position:outside;list-style-image:none;list-style:decimal outside;}dl{margin-left:1.714rem;margin-right:1.714rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.714rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;font-size:0.91028rem;line-height:1.714rem;border-collapse:collapse;width:100%;color:hsla(0,0%,0%,0.54);}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}blockquote{margin-left:1.714rem;margin-right:1.714rem;margin-top:0;padding-bottom:1.714rem;padding-left:1.714rem;padding-right:1.714rem;padding-top:1.714rem;margin-bottom:1.714rem;font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.714rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;text-transform:uppercase;color:hsla(0,0%,0%,0.61);}li{margin-bottom:calc(1.714rem / 2);margin-left:2.571rem;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.714rem;margin-bottom:calc(1.714rem / 2);margin-top:calc(1.714rem / 2);}li > ul{margin-left:1.714rem;margin-bottom:calc(1.714rem / 2);margin-top:calc(1.714rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.714rem / 2);}code{font-size:0.85rem;line-height:1.714rem;}kbd{font-size:0.85rem;line-height:1.714rem;}samp{font-size:0.85rem;line-height:1.714rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.14267rem;padding-right:1.14267rem;padding-top:0.857rem;padding-bottom:calc(0.857rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:"Â ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}ol,ul{margin-left:0;}a{color:#21759b;}a:hover{color:#0f3647;}a:visited{color:#9f9f9f;}</style><meta name="generator" content="Gatsby 2.4.2"/><title data-react-helmet="true">Sinatra is Awesome and Sinatra Authentication</title><link href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-f54e5cd357c8c0e7bf4c.js"/><link as="script" rel="preload" href="/app-69874a3ef3ac8e763842.js"/><link as="script" rel="preload" href="/0-d6aae7190fddf0767c78.js"/><link as="script" rel="preload" href="/1-fad0b22f9cc8ecd659cf.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-2df808506c3b3220a6f2.js"/><link as="fetch" rel="preload" href="/static/d/509/path---2010-02-sinatra-is-awesome-and-sinatra-authentication-3-ff-135-Q5nSlFtlP9cDalFbI3MHb9hs.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style data-emotion-css="nk32ej">.css-nk32ej{padding:10px;}</style><div class="css-nk32ej e8bxl2w0"><style data-emotion-css="1n6olsx">h2{margin:0;}</style><style data-emotion-css="1ycjowu">.css-1ycjowu{margin:0 auto;max-width:700px;padding:3.428rem;padding-top:2.571rem;}</style><div class="css-1ycjowu"><header style="margin-bottom:1.5rem"><a href="/"><style data-emotion-css="14036a">.css-14036a{margin-top:0;margin-bottom:1.714rem;display:inline-block;font-style:normal;}</style><h1 class="css-14036a">Docunext</h1></a><ul style="list-style:none;float:right"><style data-emotion-css="146q31f">.css-146q31f{float:right;}</style><li style="display:inline-block;margin-right:1rem"><a href="/about/">About</a></li></ul></header><hr/><div><h2>Sinatra is Awesome and Sinatra Authentication</h2><style data-emotion-css="r09fl8">.css-r09fl8{font-size:8pt;color:#333;margin:0;padding-top:4px;margin-bottom:9px;}</style><div class="css-r09fl8 e46dnos0">February 20th, 2010</div><div><p>I keep harping on this, but I love the fact that when I approach a task with Sinatra the slate is totally blank. Yes, there are some ready-made solutions with Rack, and Sinatra helpers, but there are no "official" methods.</p>
<p>While some may scoff, I <em>love</em> that aspect of Sinatra.</p>
<p>I'm currently reviewing Sinatra sessions, which are based off of <a href="http://www.docunext.com/">Rack::Sessions</a>, for the purpose of authentication and user interface customization.</p>
<p>Apart from the bare metal authentication mechanisms available from Rack, we are on our own!</p>
<p>Again, some may scoff, but I prefer that I don't have to put the boat in reverse to undo what others found useful to make it so I can setup what I find appropriate.</p>
<p>For example, I used javascript and PHP powered "secure" authentication without having to deal with certificates. (I use the term secure with quotes because somebody smart said that the only secure computer is one that is turned off, encased in concrete and sunk to the bottom of the ocean, and even then its not terribly secure. I agree!)</p>
<p>It probably won't be too difficult to do the same with Sinatra, and that is awesome!</p>
<p>While I have yet to get started on the actual implementation, I was able to figure out how to exclude bots from getting sessioned:</p>
<pre class="sh_ruby">
    unless :agent.to_s =~ /(Slurp|msnbot|Googlebot)/
      use Rack::Session::Memcache, :key => 'notapp', :domain => 'dev-48-gl.example.com', :expire_after => 60 * 60 * 24 * 365, :memcache_server => 'localhost:11211'
    end
</pre>
<p>Untested, of course!</p>
<p>PS - I'm still having no problems with Sinatra 1.0a. I've tried the "settings" method. It didn't work, but that may have been my bad.</p>
<p>PPS - I've now started on a Sinatra helper for RBAC (role based access control). Hopefully I'll get base the authentication system off of an existing class.</p>
<p>PPPS - Eldrad must live!</p></div><div><span>Yearly Indexes: </span><span><style data-emotion-css="1515lq9">.css-1515lq9{padding:0 2px;-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a class="css-1515lq9" href="/2003"><style data-emotion-css="18jhzrq">.css-18jhzrq{margin-bottom:0.4285rem;}</style><span class="css-18jhzrq">2003</span></a>Â </span><span><a class="css-1515lq9" href="/2004"><span class="css-18jhzrq">2004</span></a>Â </span><span><a class="css-1515lq9" href="/2005"><span class="css-18jhzrq">2005</span></a>Â </span><span><a class="css-1515lq9" href="/2006"><span class="css-18jhzrq">2006</span></a>Â </span><span><a class="css-1515lq9" href="/2007"><span class="css-18jhzrq">2007</span></a>Â </span><span><a class="css-1515lq9" href="/2010"><span class="css-18jhzrq">2010</span></a>Â </span><span><a class="css-1515lq9" href="/2008"><span class="css-18jhzrq">2008</span></a>Â </span><span><a class="css-1515lq9" href="/2009"><span class="css-18jhzrq">2009</span></a>Â </span><span><a class="css-1515lq9" href="/2011"><span class="css-18jhzrq">2011</span></a>Â </span><span><a class="css-1515lq9" href="/2012"><span class="css-18jhzrq">2012</span></a>Â </span><span><a class="css-1515lq9" href="/2013"><span class="css-18jhzrq">2013</span></a>Â </span><span><a class="css-1515lq9" href="/2015"><span class="css-18jhzrq">2015</span></a>Â </span><span><a class="css-1515lq9" href="/2019"><span class="css-18jhzrq">2019</span></a>Â </span></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2010-02-sinatra-is-awesome-and-sinatra-authentication-3ff","path":"/2010/02/sinatra-is-awesome-and-sinatra-authentication/"};window.dataPath="509/path---2010-02-sinatra-is-awesome-and-sinatra-authentication-3-ff-135-Q5nSlFtlP9cDalFbI3MHb9hs";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-69874a3ef3ac8e763842.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-2df808506c3b3220a6f2.js"],"component---src-templates-year-js":["/component---src-templates-year-js-891957ab33efc1dbd44d.js"],"component---src-pages-about-js":["/component---src-pages-about-js-12bfdfc69c833b62391f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5341a5e2cb959b620de5.js"],"component---src-pages-my-files-js":["/component---src-pages-my-files-js-5339f83df0c4e19cf546.js"],"pages-manifest":["/pages-manifest-0962b66727ffadea299d.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-2df808506c3b3220a6f2.js" async=""></script><script src="/1-fad0b22f9cc8ecd659cf.js" async=""></script><script src="/0-d6aae7190fddf0767c78.js" async=""></script><script src="/app-69874a3ef3ac8e763842.js" async=""></script><script src="/webpack-runtime-f54e5cd357c8c0e7bf4c.js" async=""></script></body></html>