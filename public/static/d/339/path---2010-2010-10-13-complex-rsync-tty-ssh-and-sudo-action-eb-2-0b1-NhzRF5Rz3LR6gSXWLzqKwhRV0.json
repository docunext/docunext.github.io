{"data":{"markdownRemark":{"html":"<p>Faced with a hosting environment and security setup not entirely compatible to the software development and deployment workflows I'm used to, I looked to the awesome power of:</p>\n<ul>\n<li>Rsync</li>\n<li>SSH</li>\n<li>Sudo</li>\n</ul>\n<p>And the notes of \"crashingdaily\": <a href=\"http://crashingdaily.wordpress.com/2007/06/29/rsync-and-sudo-over-ssh/\">rsync and sudo over ssh</a>.</p>\n<p>I chose option two, as I don't want to enable NOPASSWD in /etc/sudoers:</p>\n<pre class=\"sh_sh\">\nstty -echo; ssh server.remotehost.com sudo -v; stty echo\nrsync -a -e \"ssh\" --rsync-path=\"sudo rsync\" crashingdaily@server.remotehost.com:/u02/data_pump_dir/ /archive\n</pre>\n<p>My solution is a bit different, whereas instead of sudo'ing to root, I'm sudo'ing to another user.</p>\n<pre class=\"sh_sh\">\nstty -echo; ssh server.remotehost.com cd / && sudo -v -u exampleuser; stty echo\nrsync -a -e \"ssh\" --rsync-path=\"cd / $$ sudo  -u exampleuser rsync\" crashingdaily@server.remotehost.com:/u02/data_pump_dir/ /archive\n</pre>\n<p>I am very pleased with this solution as it uses standard tools that are or can be installed quite easily on most servers powered by open source software, is encrypted, and radically speeds up my automated workflow. SWEET!</p>","frontmatter":{"title":"Complex Rsync TTY SSH and Sudo Action"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2010/2010-10-13-complex-rsync-tty-ssh-and-sudo-action/"}}