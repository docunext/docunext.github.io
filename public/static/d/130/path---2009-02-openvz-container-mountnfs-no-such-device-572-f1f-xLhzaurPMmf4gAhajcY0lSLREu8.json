{"data":{"markdownRemark":{"html":"<h4>Mounting NFS Shares from within OpenVZ Containers</h4>\n<p>Some of Debian's kernels with OpenVZ patches do not support <strong>NFS</strong> mounts within containers. Thankfully, some do. Its supposed to work with 2.6.26-1, but it doesn't. It does, however, work with a newer kernel, as well with the older Etch kernel!</p>\n<p>When I try to mount the NFS file systems:</p>\n<pre class=\"sh_sh\">\npro-101-gl:/var/www/virtual# mount -a\nmount.nfs: No such device\n</pre>\n<p>My VZ (previous) setup:</p>\n<ul>\n<li>Linux pro-100-gl.savonix.com 2.6.26-1-openvz-686 #1 SMP Mon Dec 15 20:27:00 UTC 2008 i686 GNU/Linux</li>\n<li>kernel.ve<em>allow</em>kthreads = 1</li>\n<li>modprobe nfs</li>\n<li>vzctl version 3.0.22</li>\n<li>FEATURES=\"nfs:on\"</li>\n</ul>\n<p>The newer kernel which supports NFS:</p>\n<pre class=\"sh_sh\">\nLinux pro-101-gl.savonix.com 2.6.26-2-openvz-amd64 #1 SMP Sun Jun 21 06:01:29 UTC 2009 i686 GNU/Linux\n</pre>\n<p>With the only slightly newer kernel, all I had to do was <strong>modprobe nfs</strong> in the OpenVZ host.</p>\n<pre class=\"sh_sh\">\n# vzctl exec 101 cat /proc/filesystems\text3\text2\nnodev\tsysfs\nnodev\tproc\nnodev\ttmpfs\nnodev\tdevpts\n</pre>\n<p>On a machine with the original etch kernel (2.6.18), NFS client in a container works:</p>\n<pre class=\"sh_sh\">\n$ cat /proc/filesystems         ext3        ext2\nnodev   rpc_pipefs\nnodev   proc\nnodev   sysfs\nnodev   tmpfs\nnodev   devpts\nnodev   nfs\n</pre>\n<h4>Links</h4>\n<p><a rel=\"nofollow\" href=\"http://forum.openvz.org/index.php?&amp;t=msg&amp;th=6974\">http://forum.openvz.org/index.php?&#x26;t=msg&#x26;th=6974</a></p>","frontmatter":{"title":"OpenVZ CT mount.nfs No such device","date":"February 8th, 2009"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2009/02/openvz-container-mountnfs-no-such-device/"}}