{"data":{"markdownRemark":{"html":"<pre>#!/bin/bash#  diFFurl (A website content checker.)\n#  Version 0.2b (09062006)\n#\n#\n#  TODO: Correct nagios error codes.\n#\n#  This is a site content check for Nagios,\n#  this will grab index from sites specified\n#  in .content-check-urls. Store MD5 hash if not\n#  stored. Otherwise, it will compare with MD5 hash\n#  on the machine. It will only output if a site's MD5\n#  hash isn't the same as the stored version.\n\nURL_FILE=/home/contentcheck/.content-check-urls\n\nURL_DIR=/home/contentcheck/.content-check\n\nif ! [ -d $URL_DIR ]; then    mkdir $URL_DIR\n\nfi\n\nif ! [ -f $URL_FILE ]; then    echo \"new-content-check: $URL_FILE not found\"    exit\n\nfi\n\nfor URL in $(cat $URL_FILE);\ndo    MD5_FILE=$URL_DIR/$(echo $URL | md5sum | cut -d' ' -f1)\nif [ -f $MD5_FILE ]; then\n    links -dump \"$URL\" | md5sum &gt; $MD5_FILE.new\n    if ! diff $MD5_FILE $MD5_FILE.new &amp;&gt;/dev/null; then\n        echo \"New content at $URL\"\n        mv -f $MD5_FILE.new $MD5_FILE\n    else\n        rm $MD5_FILE.new\n        echo \"No content has been changed.\"\n        exit\n    fi\nelse\n    links -dump \"$URL\" | md5sum &gt; $MD5_FILE\nfi\ndone</pre>\n<p>I'm not using this anymore, instead opting for a http_check of each virtual host. The content check is a difficult challenge that I'll need to do some more thinking on.</p>","frontmatter":{"title":"diffurl","date":"February 4th, 2007"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2007/2007-02-04-diffurl/"}}