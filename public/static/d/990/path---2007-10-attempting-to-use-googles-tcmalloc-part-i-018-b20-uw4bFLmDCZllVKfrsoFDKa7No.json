{"data":{"markdownRemark":{"html":"<a href=\"http://www.docunext.com/blog/2007/10/26/attempting-to-use-googles-tcmalloc-part-i/\">\n<p>I'm getting more interested in some of the more technical parts of computing, and so I decided to take a shot at compiling and using Google's tcmalloc.</p>\n<p>I'll try <a href=\"http://www.csamuel.org/2006/12/15/now-using-googles-tcmalloc/\">Chris Samuel's method</a>, as well as trying to compile custom apps using tcmalloc.</p>\n<p>I just tried installing the debian package, but it depends on something I can't find...</p>\n<p>So I compiled that, but I'm not sure how to let dpkg know its installed. In compiling the perftools, I read the INSTALL document and it recommended running make check, which I did, though first I tried make test because that's what I'm used to. The check appears quite in-depth.</p>\n<p>The conclusion:</p>\n<pre>\nPASS: profiler_unittest.sh===================\n\nAll 21 tests passed===================</pre>\n<p>The INSTALL also mentioned that the library can be used on RedHat, Ubuntu, and FreeBSD, but omitted debian, which I find strange.</p>\n<p>Aha, so all I had to do was view all the downloads from the Google page, choose the non-dev version of the debian packages, and I was able to dpkg -i that. :-) Cool, now I don't have to hack /var/lib/dpkg!</p>\n<p>Hmm. OK, I added:</p>\n<p>export LD_PRELOAD=/usr/lib/libtcmalloc.so</p>\n<p>to /etc/default/apache2, but I have no idea if Apache2 is indeed using this new lib. Good ol' debugging technique of testing for an obvious error by adding an extra character to the filename proves it is at least loading:</p>\n<pre>\nERROR: ld.so: object '/usr/lib/libtcmalloce.so' from LD_PRELOAD cannot be preloaded: ignored. * Forcing reload of web server (apache2)...\n\nERROR: ld.so: object '/usr/lib/libtcmalloce.so' from LD_PRELOAD cannot be preloaded: ignored.\n\napache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName\n\nERROR: ld.so: object '/usr/lib/libtcmalloce.so' from LD_PRELOAD cannot be preloaded: ignored.</pre>\n<p><a href=\"http://code.google.com/p/google-perftools/\">http://code.google.com/p/google-perftools/</a></p>\n<p>UPDATE November 21, 2007: I'm now using tcmalloc on a low-traffic, semi-production server, and so far its working.</p>\n<p>UPATE February 10, 2008: I've compiled <a href=\"http://www.docunext.com/blog/2008/02/06/swiftweasel-on-the-via-c7/\">Iceweasel to link with Google's tcmalloc</a>, and plan to do more, including PHP, expat, libxml2, and libxslt.</p>\n<p>Â¥</p>","frontmatter":{"title":"Attempting to use Google s Thread Caching Memory Allocator tcmalloc Part I","date":"October 26th, 2007"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2007/10/attempting-to-use-googles-tcmalloc-part-i/"}}