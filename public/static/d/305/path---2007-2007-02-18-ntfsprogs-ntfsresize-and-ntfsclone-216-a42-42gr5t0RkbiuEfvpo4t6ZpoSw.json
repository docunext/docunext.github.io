{"data":{"markdownRemark":{"html":"<p>I found out about ntfsprogs from a website about dd, and then I found a great website talking about using ntfsresize and ntfsclone with a Bootcamp partition. After working on 20GB images, I got fed up, compressed one with qcow to 12GB, and now resizing the original partition (yes, on the actual hard drive - yikes!) from 20GB to 8GB. It  took a LONG time, at least an hour. In the last few percentage points, it seemed to hang, but it eventuall cranked up to 100%. This is what it looks like:</p>\n<pre>root# sudo ./ntfsresize-intel -s 8000M /dev/disk3s1\n\nntfsresize v1.13.1 (libntfs 9:0:0)\n\nDevice name        : /dev/disk3s1\n\nNTFS volume version: 3.1\n\nCluster size       : 4096 bytes\n\nCurrent volume size: 19995619840 bytes (19996 MB)\n\nCurrent device size: 19995623424 bytes (19996 MB)\n\nNew volume size    : 7999996416 bytes (8000 MB)\n\nChecking filesystem consistency ...\n\n100.00 percent completed\n\nAccounting clusters ...\n\nSpace in use       : 6252 MB (31.3%)\n\nCollecting resizing constraints ...\n\nNeeded relocations : 736487 (3017 MB)\n\nWARNING: Every sanity check passed and only the dangerous operations left.\n\nMake sure that important data has been backed up! Power outage or computer\n\ncrash may result major data loss!\n\nAre you sure you want to proceed (y/[n])? y\n\nSchedule chkdsk for NTFS consistency check at Windows boot time ...\n\nResetting $LogFile ... (this might take a while)\n\nRelocating needed data ...\n\n100.00 percent completed\n\nUpdating $BadClust file ...\n\nUpdating $Bitmap file ...\n\nUpdating Boot record ...\n\nSyncing device ...\n\nSuccessfully resized NTFS on device '/dev/disk3s1'.\n\nYou can go on to shrink the device for example with Linux fdisk.\n\nIMPORTANT: When recreating the partition, make sure that you  1)  create it at the same disk sector (use sector as the unit!)  2)  create it with the same partition type (usually 7, HPFS/NTFS)  3)  do not make it smaller than the new NTFS filesystem size  4)  set the bootable flag for the partition if it existed before\n\nOtherwise you won't be able to access NTFS or can't boot from the disk!\n\nIf you make a mistake and don't have a partition table backup then you\n\ncan recover the partition table by TestDisk or Parted's rescue mode.</pre>\n<p>Â¥</p>","frontmatter":{"title":"ntfsprogs ntfsresize and ntfsclone","date":"February 18th, 2007"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2007/2007-02-18-ntfsprogs-ntfsresize-and-ntfsclone/"}}