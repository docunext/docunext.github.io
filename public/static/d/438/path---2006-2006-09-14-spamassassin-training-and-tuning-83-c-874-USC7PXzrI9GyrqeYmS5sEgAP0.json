{"data":{"markdownRemark":{"html":"<p>Resources:</p>\n<p><a href=\"http://wiki.apache.org/spamassassin/\">http://wiki.apache.org/spamassassin/</a></p>\n<p><a href=\"http://www.agentbob.info/agentbob/g3/57.html\">http://www.agentbob.info/agentbob/g3/57.html</a></p>\n<p><a href=\"http://wiki.apache.org/spamassassin/CustomRulesets\">http://wiki.apache.org/spamassassin/CustomRulesets</a></p>\n<p><a href=\"http://rulesemporium.com/++++++++++local.cf\">http://rulesemporium.com/++++++++++local.cf</a></p>\n<p>To configure SpamAssassin to use Bayesian analysis we need to add this line:</p>\n<p>use_bayes 1   1. Enable Bayes auto-learning</p>\n<p>bayes<em>auto</em>learn 1++++++++++sa-learn</p>\n<p>sa-learn - train SpamAssassin's Bayesian classifier</p>\n<p>To show sa-learn spam:</p>\n<p>sa-learn --spam --mbox --showdots /var/vmail/$domain/$user/.Spam/</p>\n<p>To show sa-learn ham (not spam):</p>\n<p>sa-learn --ham --mbox --showdots /var/vmail/$domain/$user/.maildir/cur/</p>\n<p>If at any time you accidentally classify a message incorrectly this can be corrected. Move the message to a temporary folder, then use the command</p>\n<p>sa-learn --forget --mbox ~/Mail/temp</p>\n<p>Due to spam being constantly evolving, it's required that we show SA new spam and fill the database up with everything we have. The database can get large, but this is not a concern for us at this time.++++++++++.spamassassin/user_prefs (reccomended)</p>\n<p>header RCVD<em>IN</em>RFC<em>PM eval:check</em>rbl('relay', 'postmaster.rfc-ignorant.org.')</p>\n<p>describe RCVD<em>IN</em>RFC_PM Received via a relay in postmaster.rfc-ignorant.org</p>\n<p>score RCVD<em>IN</em>RFC_PM 2.0</p>\n<p>header X<em>CHINESE</em>RELAY eval:check_rbl('relay', 'cn.rbl.cluecentral.net.')</p>\n<p>describe X<em>CHINESE</em>RELAY Received via a relay in China</p>\n<p>score X<em>CHINESE</em>RELAY 1.5</p>\n<p>header X<em>KOREAN</em>RELAY eval:check_rbl('relay', 'korea.services.net.')</p>\n<p>describe X<em>KOREAN</em>RELAY Received via a relay in Korea</p>\n<p>score X<em>KOREAN</em>RELAY 1.5</p>\n<p>header X<em>MONKEY</em>FORMMAIL eval:check_rbl('relay', 'formmail.relays.monkeys.com.')</p>\n<p>describe X<em>MONKEY</em>FORMMAIL Received via relay in monkeys.com's open formmail scripts list</p>\n<p>score X<em>MONKEY</em>FORMMAIL 1.5 header X<em>MONKEY</em>PROXY eval:check_rbl('relay', 'proxies.relays.monkeys.com.')</p>\n<p>describe X<em>MONKEY</em>PROXY Received via relay in monkeys.com's open proxy list</p>\n<p>score X<em>MONKEY</em>PROXY 1.5</p>\n<p>header X<em>MONKEY</em>PROXY eval:check_rbl('relay', 'spamhaus.relays.osirusoft.com.')</p>\n<p>describe X<em>MONKEY</em>PROXY Received via relay in Spamhaus Blacklist</p>\n<p>score X<em>MONKEY</em>PROXY 1.5   1. Not Just Another BlackList tests from <a href=\"http://njabl.org/use.html\">http://njabl.org/use.html</a></p>\n<p>header IN<em>NJABL</em>ORG rbleval:check_rbl('njabl','dnsbl.njabl.org.')</p>\n<p>describe IN<em>NJABL</em>ORG Received via a relay in dnsbl.njabl.org</p>\n<p>tflags IN<em>NJABL</em>ORG net</p>\n<p>header NJABL<em>OPEN</em>RELAY rbleval:check<em>rbl</em>results_for('njabl', '127.0.0.2')</p>\n<p>describe NJABL<em>OPEN</em>RELAY DNSBL: sender is Confirmed Open Relay</p>\n<p>tflags NJABL<em>OPEN</em>RELAY net</p>\n<p>header NJABL<em>DUL rbleval:check</em>rbl<em>results</em>for('njabl', '127.0.0.3')</p>\n<p>describe NJABL_DUL DNSBL: sender ip address in in a dialup block</p>\n<p>tflags NJABL_DUL net</p>\n<p>header NJABL<em>SPAM</em>SRC rbleval:check<em>rbl</em>results_for('njabl', '127.0.0.4')</p>\n<p>describe NJABL<em>SPAM</em>SRC DNSBL: sender is Confirmed Spam Source</p>\n<p>tflags NJABL<em>SPAM</em>SRC net</p>\n<p>header NJABL<em>MULTI</em>STAGE rbleval:check<em>rbl</em>results_for('njabl', '127.0.0.5')</p>\n<p>describe NJABL<em>MULTI</em>STAGE DNSBL: sent through multi-stage open relay</p>\n<p>tflags NJABL<em>MULTI</em>STAGE net</p>\n<p>header NJABL<em>CGI rbleval:check</em>rbl<em>results</em>for('njabl', '127.0.0.8')</p>\n<p>describe NJABL_CGI DNSBL: sender is an open formmail</p>\n<p>tflags NJABL_CGI net</p>\n<p>header NJABL<em>PROXY rbleval:check</em>rbl<em>results</em>for('njabl', '127.0.0.9')</p>\n<p>describe NJABL_PROXY DNSBL: sender is an open proxy</p>\n<p>tflags NJABL_PROXY net</p>\n<p>score IN<em>NJABL</em>ORG 0.38</p>\n<p>score NJABL_DUL 0.62</p>\n<p>score NJABL<em>MULTI</em>STAGE 0.75</p>\n<p>score NJABL_PROXY 3.00</p>\n<p>score NJABL<em>OPEN</em>RELAY 3.00</p>\n<p>score NJABL_CGI 1.50</p>\n<p>score NJABL<em>SPAM</em>SRC 3.00</p>\n<p>Trying to get more results:\"DCC, Pyzor, Razor2</p>\n<p>Spams, by and large, get distributed to lots of people with little or no modification. The DCC, Pyzor, and Razor projects attempt to cash in on this fact by asking people to submit a message to a central database once it has been identified as spam. If I identify a message as spam at 8:45am, I'll submit it to one of these databases. When you read the same message sent to you at 9:10am, Spamassassin asks that database, \"Has anyone submitted this message as spam?\". The database responds, \"I'm 70% sure it is because someone reported it\", and now its spam likelihood goes up.\"</p>\n<pre>\nemerge dcc razor pyzor\n\nrazor-admin -create+++++local.cf#Enable network checks\n\nuse_razor2              1\n\nuse_dcc                 1\n\nuse_pyzor               1+++++/etc/mail/spamassassin/v310.pre# DCC - perform DCC message checks.## DCC is disabled here because it is not open source.  See the DCC# license for more details.#\n\nloadplugin Mail::SpamAssassin::Plugin::DCC# Razor2 - perform Razor2 message checks.## Razor2 is disabled here because it is not available for unlimited free# use.  It is currently free for personal use, subject to capacity# constraints.  See the Cloudmark SpamNet Service Policy for more details.#\n\nloadplugin Mail::SpamAssassin::Plugin::Razor2</pre>","frontmatter":{"title":"SpamAssassin Training and Tuning","date":"September 14th, 2006"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2006/2006-09-14-spamassassin-training-and-tuning/"}}