{"componentChunkName":"component---src-templates-blog-post-js","path":"/2010/12/rails-activerecord-has-and-belongs-to-many/","result":{"data":{"markdownRemark":{"html":"<p>I'm back working on a Rails application and since its Rails 2.x, I'm using ActiveRecord. That is of course fine, but most of my experience has been with DataMapper, which plays nicely with Merb and Rails 3.</p>\n<p>Yesterday I was working on some models and their associations, starting with the generation of the models:</p>\n<pre class=\"sh_sh\">\nscript/generate model Company name:string\nscript/generate model Industry name:string\n</pre>\n<p>Then I got to the step where I indicated in the model that each object could be associated with any number of its associated objects and so of course I used something like this:</p>\n<pre class=\"sh_ruby\">\nclass Company\n  has_and_belongs_to_many :industries\nend\nclass Industry\n  has_and_belongs_to_many :companies\nend\n</pre>\n<p>That is good, but what about the database migrations for a many-to-many ActiveRecord association for Rails? Turns out that since the existing migrations were automatically created <em>prior</em> to the associations, at least one needed to be edited prior to being run via rake. I added something like this to the migration that was automatically generated when I created the industry model:</p>\n<pre class=\"sh_ruby\">\ncreate_table :companies_industries, :id => false do |t|\n  t.references :company, :industry\nend\n</pre>\n<p>After that, I ran:</p>\n<pre class=\"sh_sh\">\nrake db:migrate\n</pre>\n<p>It worked like a charm!</p>","frontmatter":{"title":"Rails ActiveRecord has and belongs to many","date":"December 28th, 2010"}}},"pageContext":{"slug":"/2010/12/rails-activerecord-has-and-belongs-to-many/"}}}