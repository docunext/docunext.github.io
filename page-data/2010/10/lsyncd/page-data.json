{"componentChunkName":"component---src-templates-blog-post-js","path":"/2010/10/lsyncd/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>I'm finally putting lsyncd into production to synchronize web site mirrors. After I work out any kinks, I'll put it to use for some configuration files, too.</p>\n<h4>What is lsyncd?</h4>\n<p>Its a small piece of software that connects inotify (the file watching component of the linux kernel) with rsync in a very manageable way. More specifically, it enables systems administrators and computer enthusiasts to easily mirror files and directories across multiple servers with ease - and perhaps more importantly - near immediate mirroring speed.</p>\n<h4>How does it work?</h4>\n<p>Lsyncd works like this:</p>\n<ol>\n<li>\n<p>Setup a configuration file which includes:</p>\n<ul>\n<li>Settings for rsync</li>\n<li>A set of source and target directories to synchronize (see our wiki page for more information about lsyncd.conf.xml)</li>\n</ul>\n</li>\n<li>Run lsyncd</li>\n</ol>\n<h4>To-Do</h4>\n<p>I don't want to always start lsyncd manually from the command line. In my opinion, it should always be running. I could add an init script, or I could manage it with daemontools. <strong>Which one do you recommend?</strong></p>\n<h4>Excludes File</h4>\n<p>Rsync has a great method of excluding files, simply create a list of globs in a file, and then tell rsync about it.</p>\n<p>With lsyncd, I use this line:</p>\n<pre class=\"sh_xml\"/>\n&lt;exclude-from filename=\"/root/rsync_virtual_tools/constant_excludes\" />\n</pre>\n<p>In it I have these entries:</p>\n<pre class=\"sh_sh\">\n*.new\n*/wiki\nsvnlog\n.git\nsvnlogs\n.ikiwiki\ndnu\n</pre>\n<p>The *.new file exclusion is important because Movable Type creates an <em>example.html.new</em> file as it publishes, and <strong>I just noticed as I first published this entry, lsyncd was transferring, then deleting those files!</strong></p>\n<p><strong>Yes, its that fast!</strong></p>\n<p>Hmm... still seems to be triggered by the *.new files... so I'll turn off temp files in the mt-config.cgi file:</p>\n<pre class=\"sh_sh\">\nNoTempFiles 1\n</pre>\n<p>Yup! That worked. I bet there are plenty of situations where some tweaks are needed.</p>\n<h4>More information:</h4>\n<ul>\n<li><a href=\"http://www.docunext.com/\">lsyncd</a></li>\n</ul>","fields":{"slug":"/2010/10/lsyncd/"},"frontmatter":{"title":"Lsyncd","date":"October 6th, 2010","tags":"mirrors"}}},"pageContext":{"slug":"/2010/10/lsyncd/"}},"staticQueryHashes":["3159585216","758480095"]}