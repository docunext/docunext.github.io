{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2010/10/perfect-reason-for-a-sinatra-application-nginx-mail-proxy-authentication/",
    "result": {"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>I am a big fan of Sinatra, the adept development framework for building small and tight web applications.</p>\n<p>So recently when I was setting up <a href=\"http://www.docunext.com/\">Dovecot</a> with LDAP authentication on an <a href=\"http://www.docunext.com/wiki/OpenVZ\">OpenVZ virtual server</a>, I gave the <a href=\"http://www.docunext.com/wiki/NGINX\">NGINX</a> IMAP proxy a try.</p>\n<p>While I got it working, I found the authentication module a bit clunky at first. It passes credentials from the user to an authentication system using HTTP, expecting HTTP headers back about whether the users' credentials were legitimate and where to proxy their connection.</p>\n<p>After I tried out an example PHP authentication mechanism, it made more sense. NGINX is a web server, too! Its super simple, and I wouldn't mind seeing more authentication mechanisms like this. Here's how it works (examples are from the NGINX wiki):</p>\n<p><strong>Request</strong>:</p>\n<pre class=\"sh_sh\">\nGET /auth HTTP/1.0\nHost: auth.server.hostname\nAuth-Method: plain\nAuth-User: user\nAuth-Pass: password\nAuth-Protocol: imap\nAuth-Login-Attempt: 1\nClient-IP: 192.168.1.1\n</pre>\n<p><strong>Response</strong>:</p>\n<pre class=\"sh_sh\">\nHTTP/1.0 200 OK\nAuth-Status: OK\nAuth-Server: 192.168.1.10\nAuth-Port: 143\nAuth-User: newname\nAuth-Pass: newpassword\n</pre>\n<p>Seeing how much I dig Sinatra, how about a Sinatra application that proxies this simple HTTP authentication mechanism to a SASL mechanism?</p>\n<p>The NGINX mail authentication mechanism is actually more sophisticated than the basic HTTP authentication module because it supports CRAM-MD5 which some e-mail clients support.</p>\n<p>If only NGINX supported authorization via digest authentication like this using an HTTP request to handle the actual authentication - that would be so cool!! It might even compete with the fact that Apache can use digest authentication via a MySQL/Postgres/SQLite backend!</p>\n<p>Â¥</p>","fields":{"slug":"/2010/10/perfect-reason-for-a-sinatra-application-nginx-mail-proxy-authentication/"},"frontmatter":{"title":"Perfect Reason for a Sinatra Application NGINX Mail Proxy Authentication","date":"October 5th, 2010","tags":"apache,cram-md5,imap,mysql,nginx,postgres,proxies,sasl,sinatra,sqlite"}}},"pageContext":{"slug":"/2010/10/perfect-reason-for-a-sinatra-application-nginx-mail-proxy-authentication/"}},
    "staticQueryHashes": ["2191495970","4224293195"]}