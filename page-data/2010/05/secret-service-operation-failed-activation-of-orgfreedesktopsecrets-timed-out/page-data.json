{"componentChunkName":"component---src-templates-blog-post-js","path":"/2010/05/secret-service-operation-failed-activation-of-orgfreedesktopsecrets-timed-out/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>Something I updated today or recently caused nm-applet to no longer work. It was disappearing from my panel, but was apparently trying to run. I was getting syslogs like this:</p>\n<pre class=\"sh_sh\">\nMay  3 23:54:28 wrk-240-gr kernel: [  840.493921] wlan0: authenticated\nMay  3 23:54:28 wrk-240-gr kernel: [  840.493928] wlan0: associate with AP 00:1d:73:18:12:fc\nMay  3 23:54:28 wrk-240-gr kernel: [  840.496123] wlan0: RX ReassocResp from 00:1d:73:18:12:fc (capab=0x401 status=0 aid=2)\nMay  3 23:54:28 wrk-240-gr kernel: [  840.496130] wlan0: associated\nMay  3 23:54:28 wrk-240-gr kernel: [  840.497211] wlan0: disassociating by local choice (reason=3)\nMay  3 23:54:28 wrk-240-gr wpa_supplicant[2066]: No network configuration found for the current AP\n</pre>\n<p>First it hung when awesomewm's rc.lua tried to launch it via:</p>\n<pre class=\"sh_sh\">\nos.execute(\"nm-applet &\")\n</pre>\n<p>So I killed that process and tried starting it manually... major hangs! First I was getting this:</p>\n<pre class=\"sh_sh\">\n** (process:3564): WARNING **: error: failed to read connections from org.freedesktop.NetworkManagerUserSettings:\n    The name org.freedesktop.NetworkManagerUserSettings was not provided by any .service files\n</pre>\n<p>Then I figured out that nm-applet now uses consolekit (or policykit?) to authenticate. I had previously held back consolekit from upgrading so I manually upgraded it, as well as network-manager-gnome.</p>\n<p>This seemed to take me a little further, as when I'd try manually launching nm-applet, it would eventually respond with this notice:</p>\n<pre class=\"sh_sh\">\nsecret service operation failed: Activation of org.freedesktop.secrets timed out\n</pre>\n<p>OK, well, I found this file <strong>/usr/share/dbus-1/services/org.freedesktop.secrets.service</strong>:</p>\n<pre class=\"sh_sh\">\n[D-BUS Service]\nName=org.freedesktop.secrets\nExec=/usr/bin/gnome-keyring-daemon --start --foreground --components=secrets\n</pre>\n<p>So I took a shot in the dark and started gnome-keyring-daemon manually, and then when I tried nm-applet, it prompted me for a password. Sweet!</p>\n<p>What next? I decided to start gnome-keyring-daemon via awesome's rc.lua:</p>\n<pre class=\"sh_sh\">\n#ck-launch-session\n#gnome-settings-daemon &\ngnome-keyring-daemon &\n#gnome-power-manager &\nset -a\n. /etc/environment\nwmname LG3D\nxsetroot -cursor_name dmz\nexec awesome\n</pre>\n<p>After that, at least when I logged in, it would prompt me to unlock the default keychain. Thankfully, when I expanded the details section, I was able to click a box that allowed me to always unlock that keychain upon login.</p>\n<p>Notes:</p>\n<ul>\n<li>I use Debian</li>\n<li>I run AwesomeWM, launched via xdm</li>\n<li>I use hal</li>\n<li>I'm in the netdev group</li>\n</ul>\n<p>Links:</p>\n<ul>\n<li><a href=\"http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=578408\">cnetworkmanager dbus config prevents nm-applet from asking about password</a></li>\n<li><a href=\"http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=572714\">nm-applet does not show up</a></li>\n</ul>","fields":{"slug":"/2010/05/secret-service-operation-failed-activation-of-orgfreedesktopsecrets-timed-out/"},"frontmatter":{"title":"secret service operation failed Activation of org.freedesktop.secrets timed out","date":"May 4th, 2010","tags":"awesomewm,gnome-keyring-daemon"}}},"pageContext":{"slug":"/2010/05/secret-service-operation-failed-activation-of-orgfreedesktopsecrets-timed-out/"}},"staticQueryHashes":["3159585216","3388129809"]}