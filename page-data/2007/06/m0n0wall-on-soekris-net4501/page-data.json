{"componentChunkName":"component---src-templates-blog-post-js","path":"/2007/06/m0n0wall-on-soekris-net4501/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<pre class=\"sh_sh\">Jun 15 23:17:45 \t/kernel: avail memory = 50819072 (49628K bytes)\nJun 15 23:17:45 \t/kernel: Preloaded elf kernel \"kernel\" at 0xc0e0f000.\nJun 15 23:17:45 \t/kernel: Preloaded mfs_root \"/mfsroot\" at 0xc0e0f0a8.\nJun 15 23:17:45 \t/kernel: md0: Preloaded image </mfsroot> 11534336 bytes at 0xc030d43c\nJun 15 23:17:45 \t/kernel: md1: Malloc disk\nJun 15 23:17:45 \t/kernel: Timecounter \"ELAN\" frequency 8333333 Hz\nJun 15 23:17:45 \t/kernel: npx0: <math processor> on motherboard\nJun 15 23:17:45 \t/kernel: npx0: INT 16 interface\nJun 15 23:17:45 \t/kernel: pcib0: <AMD Elan SC520 host to PCI bridge> on motherboard\nJun 15 23:17:45 \t/kernel: pci0: <PCI bus> on pcib0\nJun 15 23:17:45 \t/kernel: sis0: <NatSemi DP83815 10/100BaseTX> port 0xe000-0xe0ff mem 0xa0000000-0xa0000fff irq 10 at device 18.0 on pci0\nJun 15 23:17:45 \t/kernel: sis0: Ethernet address: 00:00:24:c8:7b:b0\nJun 15 23:17:45 \t/kernel: miibus0: <MII bus> on sis0\nJun 15 23:17:45 \t/kernel: ukphy0: <Generic IEEE 802.3u media interface> on miibus0\nJun 15 23:17:45 \t/kernel: ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\nJun 15 23:17:45 \t/kernel: sis1: <NatSemi DP83815 10/100BaseTX> port 0xe100-0xe1ff mem 0xa0001000-0xa0001fff irq 11 at device 19.0 on pci0\nJun 15 23:17:45 \t/kernel: sis1: Ethernet address: 00:00:24:c8:7b:b1\nJun 15 23:17:45 \t/kernel: miibus1: <MII bus> on sis1\nJun 15 23:17:45 \t/kernel: ukphy1: <Generic IEEE 802.3u media interface> on miibus1\nJun 15 23:17:45 \t/kernel: ukphy1: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\nJun 15 23:17:45 \t/kernel: sis2: <NatSemi DP83815 10/100BaseTX> port 0xe200-0xe2ff mem 0xa0002000-0xa0002fff irq 5 at device 20.0 on pci0\nJun 15 23:17:45 \t/kernel: sis2: Ethernet address: 00:00:24:c8:7b:b2\nJun 15 23:17:45 \t/kernel: miibus2: <MII bus> on sis2\nJun 15 23:17:45 \t/kernel: ukphy2: <Generic IEEE 802.3u media interface> on miibus2\nJun 15 23:17:45 \t/kernel: ukphy2: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\nJun 15 23:17:45 \t/kernel: isa0: <ISA bus> on motherboard\nJun 15 23:17:45 \t/kernel: orm0: <Option ROM> at iomem 0xc8000-0xd0fff on isa0\nJun 15 23:17:45 \t/kernel: pmtimer0 on isa0\nJun 15 23:17:45 \t/kernel: ata0 at port 0x1f0-0x1f7,0x3f6 irq 14 on isa0\nJun 15 23:17:45 \t/kernel: ata1 at port 0x170-0x177,0x376 irq 15 on isa0\nJun 15 23:17:45 \t/kernel: sio0 at port 0x3f8-0x3ff irq 4 flags 0x30 on isa0\nJun 15 23:17:45 \t/kernel: sio0: type 16550A, console\nJun 15 23:17:45 \t/kernel: sio1 at port 0x2f8-0x2ff irq 3 on isa0\nJun 15 23:17:45 \t/kernel: sio1: type 16550A\nJun 15 23:17:45 \t/kernel: Elan-mmcr driver: MMCR at 0xc597e000\nJun 15 23:17:45 \t/kernel: BRIDGE 020214 loaded\nJun 15 23:17:45 \t/kernel: IPsec: Initialized Security Association Processing.\nJun 15 23:17:45 \t/kernel: IP Filter: v3.4.35 initialized. Default = block all, Logging = enabled\nJun 15 23:17:45 \t/kernel: ad0: 245MB <SanDisk SDCFB-256> [980/16/32] at ata0-master BIOSPIO\nJun 15 23:17:45 \t/kernel: Mounting root from ufs:/dev/md0c\nJun 15 23:17:48 \tdnsmasq[100]: started, version 2.35 cachesize 150\nJun 15 23:17:48 \tdnsmasq[100]: compile time options: no-IPv6 GNU-getopt ISC-leasefile no-DBus no-I18N\nJun 15 23:17:48 \tdnsmasq[100]: setting --bind-interfaces option because of OS limitations\nJun 15 23:17:48 \tdnsmasq[100]: setting --bind-interfaces option because of OS limitations\nJun 15 23:17:48 \tdnsmasq[100]: reading /etc/resolv.conf\nJun 15 23:17:49 \tdnsmasq[100]: using nameserver 64.25.80.130#53\nJun 15 23:17:49 \tdnsmasq[100]: using nameserver 4.2.2.1#53\nJun 15 23:17:49 \tdnsmasq[100]: read /etc/hosts - 2 addresses\nJun 15 23:17:53 \t/kernel: ipfw2 initialized, divert disabled, rule-based forwarding enabled, default to accept, logging disabled\nJun 15 23:17:55 \t/kernel: DUMMYNET initialized (011031)</pre>\n<p>Unfortunately the webGUI for m0n0wall on the net4501 is REALLY SLOW. I mean molasses. I'm wondering if I have mine configured wrong because it is so slow. Up to a minute for the page to refresh. The WRAP is much much faster. The bridging is fine (I have mine setup as a bridge filter to manage bandwidth).</p>\n<pre>\n+----------------+\n| CABLE MODEM    |\n+----------------+\n|\n+---------------------------+\n| SOEKRIS - m0n0wall bridge |\n+---------------------------+(LAN - No DHCP)\n|                           |\n| (OPT1 PUBLIC IPs)         |\n|                           |\n+------------+              |\n| DMZ SWITCH |              |\n+------------+-+----+       |\n|             SRV1 SRV2..   |\n|                           |\n+---------------------+     |\n| WRAP - m0n0wall vpn |     |\n+---------------------+     |\n|                           |\n|(LAN)                      |\n|                           |\n+------------+              |\n| LAN SWITCH |              |\n+------------+--------------+\n</pre>\n<p>I'm trying to make the net4501 perform a little faster, so I'm disabling most things that I don't need.</p>\n<p>I just emailed the m0n0wall lists this question:</p>\n<blockquote>I'm loving m0n0wall, nice work! I'm using a soekris net4501 as a filtered bridge to manage bandwidth for a diverse network. I have a /28 subnet of public ips that I'm passing through the net4501 from wan to opt1 to a switch connecting:\n<ul>\n<li>Astlinux (though soon to be askoziaPBX) on WRAP</li>\n<li>m0n0wall on a WRAP acting as a NAT and router for our office lan</li>\n<li>a couple of public servers</li>\n</ul>\n<p>This allows our lan computers to access the public servers, which you can't do when using 1:1 or server NAT AFAIK.</p>\n<p>Everything is working well, and I have the inner m0n0wall (the one on the WRAP behind the filtered bridge) connecting a VPN out to another network. That still works fine, except I'm noticing some very odd behavior. If I ssh over the VPN to a a device on the remove lan and run one of the following commands:</p>\n<ul>\n<li>ifconfig</li>\n<li>ps -A</li>\n</ul>\n<p>something goes haywire and the shell is dropped. The process doesn't die, as I can login through the public ip and watch the top of my user and see sshd and bash continue to run after the screen buffer in the other shell through the vpn stops responding.</p>\n<p>I'm wondering if I'm doing something that goes against good network design here, or if this is a sign of something that is mis-configured and needs to be fixed. I appreciate any advice - thanks!</blockquote></p>\n<p>Â¥</p>","fields":{"slug":"/2007/06/m0n0wall-on-soekris-net4501/"},"frontmatter":{"title":"m0n0wall on Soekris net4501","date":"June 15th, 2007","tags":"m0n0wall,networking,soekris"}}},"pageContext":{"slug":"/2007/06/m0n0wall-on-soekris-net4501/"}},"staticQueryHashes":["3159585216","3388129809"]}