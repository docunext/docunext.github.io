{"componentChunkName":"component---src-templates-blog-post-js","path":"/2011/01/manage-large-files-with-git-annex-by-joey-hess/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>I've been really looking forward to trying out git annex, an extension (is that the right term here?) to Git by Joey Hess.</p>\n<p>In a nutshell, it allows large files to be stored in a git repository, without having to store different versions of those files (though changes can be tracked).</p>\n<p>I'm running Ubuntu testing, so I <em>should</em> be able to install it OK. Doh! Looks like it is not available with the repositories I have setup on my notebook, and since I don't want to fuss with that, I'm creating an OpenVZ container to run Debian unstable.</p>\n<h4>Actually Using Git Annex</h4>\n<p>Now that I've installed <tt>git annex</tt> from the Debian Unstable repository, I've actually used it!</p>\n<pre class=\"sh_sh\">\nalbertlash@dev-49-gl:~/gitannextesting$ ls\nalbertlash@dev-49-gl:~/gitannextesting$ mv /home/albertlash/my-cooking-video.avi ./\nalbertlash@dev-49-gl:~/gitannextesting$ ls\nmy-cooking-video.avi\nalbertlash@dev-49-gl:~/gitannextesting$ git annex add my-cooking-video.avi\nadd my-cooking-video.avi ok\n(Recording state in git...)\nalbertlash@dev-49-gl:~/gitannextesting$ git commit -a -m \"adding my cooking video to a git repository, whoa\"\n[master d87acee] adding my cooking video to a git repository, whoa\n 2 files changed, 2 insertions(+), 0 deletions(-)\n create mode 100644 .git-annex/WORM:1293985717:3760032:my-cooking-video.avi.log\n create mode 120000 my-cooking-video.avi\nalbertlash@dev-49-gl:~/gitannextesting$ ls -lah\ntotal 24K\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:30 .\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:29 ..\ndrwxr-xr-x 9 albertlash albertlash 4.0K Jan  2 16:30 .git\ndrwxr-xr-x 2 albertlash albertlash 4.0K Jan  2 16:30 .git-annex\n-rw-r--r-- 1 albertlash albertlash   29 Jan  2 16:28 .gitattributes\nlrwxrwxrwx 1 albertlash albertlash  108 Jan  2 16:30 my-cooking-video.avi -> .git/annex/objects/WORM:1293985717:3760032:my-cooking-video.avi/WORM:1293985717:3760032:my-cooking-video.avi\nalbertlash@dev-49-gl:~/gitannextesting$\n</pre>\n<p>What does WORM mean? <strong>W</strong>rite <strong>O</strong>nce <strong>R</strong>ead <strong>M</strong>any.</p>\n<p>Hmmm.... but let's look into what is going wrong when I try to clone the repository and access the annexed file:</p>\n<pre class=\"sh_sh\">\nalbertlash@dev-49-gl:~$ git clone gitannextesting/.git testclone2\nCloning into testclone2...\ndone.\nalbertlash@dev-49-gl:~$ cd !$\ncd testclone2\nalbertlash@dev-49-gl:~/testclone2$ git annex init \"testing 234\"\ninit testing 234 [master 2bfdf28] git annex init\n 1 files changed, 1 insertions(+), 0 deletions(-)\nok\nalbertlash@dev-49-gl:~/testclone2$ git annex get my-cooking-video.avi\nget my-cooking-video.avi\n  I was unable to access these remotes: origin\n  Try making some of these repositories available:\n  \t610205c6-168d-11e0-8b81-af933623854c  -- testing 123\nfailed\ngit-annex: 1 failed\nalbertlash@dev-49-gl:~/testclone2$ vim .git/config\nalbertlash@dev-49-gl:~/testclone2$ git pull origin master\nFrom /home/albertlash/gitannextesting/\n * branch            master     -> FETCH_HEAD\nAlready up-to-date.\nalbertlash@dev-49-gl:~/testclone2$ ls -lah\ntotal 24K\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:35 .\ndrwxr-xr-x 5 albertlash albertlash 4.0K Jan  2 16:35 ..\ndrwxr-xr-x 9 albertlash albertlash 4.0K Jan  2 16:36 .git\ndrwxr-xr-x 2 albertlash albertlash 4.0K Jan  2 16:35 .git-annex\n-rw-r--r-- 1 albertlash albertlash   29 Jan  2 16:35 .gitattributes\nlrwxrwxrwx 1 albertlash albertlash  108 Jan  2 16:35 my-cooking-video.avi -> .git/annex/objects/WORM:1293985717:3760032:my-cooking-video.avi/WORM:1293985717:3760032:my-cooking-video.avi\nalbertlash@dev-49-gl:~/testclone2$ git annex get my-cooking-video.avi\nget my-cooking-video.avi\n  I was unable to access these remotes: origin\n  Try making some of these repositories available:\n  \t610205c6-168d-11e0-8b81-af933623854c  -- testing 123\nfailed\ngit-annex: 1 failed\nalbertlash@dev-49-gl:~/testclone2$\n</pre>\n<p>Apparently git-annex does not support file-system based origin remotes? That can't be right because the git annex walkthrough includes the use of a removable USB drive as a remote. I must have missed a step or something, because when I instead cloned the repository using an ssh remote, <tt>git annex get my-cooking-video.avi</tt> worked fine.</p>\n<pre class=\"sh_sh\">\nalbertlash@dev-49-gl:~$ git clone ssh://localhost/home/albertlash/gitannextesting/ ./testclone3\nCloning into ./testclone3...\nremote: Counting objects: 12, done.\nremote: Compressing objects: 100% (8/8), done.\nremote: Total 12 (delta 1), reused 0 (delta 0)\nReceiving objects: 100% (12/12), done.\nResolving deltas: 100% (1/1), done.\nalbertlash@dev-49-gl:~$ cd !$\ncd ./testclone3\nalbertlash@dev-49-gl:~/testclone3$ ls -lah\ntotal 24K\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:41 .\ndrwxr-xr-x 5 albertlash albertlash 4.0K Jan  2 16:41 ..\ndrwxr-xr-x 8 albertlash albertlash 4.0K Jan  2 16:41 .git\ndrwxr-xr-x 2 albertlash albertlash 4.0K Jan  2 16:41 .git-annex\n-rw-r--r-- 1 albertlash albertlash   29 Jan  2 16:41 .gitattributes\nlrwxrwxrwx 1 albertlash albertlash  108 Jan  2 16:41 my-cooking-video.avi -> .git/annex/objects/WORM:1293985717:3760032:my-cooking-video.avi/WORM:1293985717:3760032:my-cooking-video.avi\nalbertlash@dev-49-gl:~/testclone3$ git annex init \"test clone 123\"\ninit test clone 123 [master fdc4c32] git annex init\n 1 files changed, 1 insertions(+), 0 deletions(-)\nok\nalbertlash@dev-49-gl:~/testclone3$ ls -lah\ntotal 24K\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:41 .\ndrwxr-xr-x 5 albertlash albertlash 4.0K Jan  2 16:41 ..\ndrwxr-xr-x 9 albertlash albertlash 4.0K Jan  2 16:41 .git\ndrwxr-xr-x 2 albertlash albertlash 4.0K Jan  2 16:41 .git-annex\n-rw-r--r-- 1 albertlash albertlash   29 Jan  2 16:41 .gitattributes\nlrwxrwxrwx 1 albertlash albertlash  108 Jan  2 16:41 my-cooking-video.avi -> .git/annex/objects/WORM:1293985717:3760032:my-cooking-video.avi/WORM:1293985717:3760032:my-cooking-video.avi\nalbertlash@dev-49-gl:~/testclone3$ git annex get my-cooking-video.avi\nget my-cooking-video.avi (getting UUID for origin...) (copying from origin...)\nWORM:1293985717:3760032:my-cooking-video.avi\n     3760032 100%   31.73MB/s    0:00:00 (xfer#1, to-check=0/1)\nsent 30 bytes  received 3760601 bytes  2507087.33 bytes/sec\ntotal size is 3760032  speedup is 1.00\nok\n(Recording state in git...)\nalbertlash@dev-49-gl:~/testclone3$ ls -lah\ntotal 24K\ndrwxr-xr-x 4 albertlash albertlash 4.0K Jan  2 16:41 .\ndrwxr-xr-x 5 albertlash albertlash 4.0K Jan  2 16:41 ..\ndrwxr-xr-x 9 albertlash albertlash 4.0K Jan  2 16:41 .git\ndrwxr-xr-x 2 albertlash albertlash 4.0K Jan  2 16:41 .git-annex\n-rw-r--r-- 1 albertlash albertlash   29 Jan  2 16:41 .gitattributes\nlrwxrwxrwx 1 albertlash albertlash  108 Jan  2 16:41 my-cooking-video.avi -> .git/annex/objects/WORM:1293985717:3760032:my-cooking-video.avi/WORM:1293985717:3760032:my-cooking-video.avi\n</pre>\n<h4>See Also</h4>\n<ul>\n<li><a href=\"http://kitenet.net/~joey/blog/entry/on_not_coding_late/\">Here is another quality blog post by Joey Hess about his work on Git Annex, and the factors involved with \"coding late\".</a></li>\n<li><a href=\"http://lwn.net/Articles/418337/\" rel=\"nofollow\">Here is an article at LWN.net titled \"Large file management with git-annex\".</a></li>\n</ul>\n<p>Â¥</p>","fields":{"slug":"/2011/01/manage-large-files-with-git-annex-by-joey-hess/"},"frontmatter":{"title":"Manage Large Files with Git Annex by Joey Hess","date":"January 1st, 2011","tags":"documentation,git"}}},"pageContext":{"slug":"/2011/01/manage-large-files-with-git-annex-by-joey-hess/"}}}