{"componentChunkName":"component---src-templates-blog-post-js","path":"/2006/04/postfix-notes/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<h3 id=\"toc0\">Postfix Vacation Autoresponder Howto</h3>\n<h4 id=\"toc1\">Setting up courier-vacation:</h4>\n<p>1. Needs maildrop - emerge maildrop\n<p>1b.Need to edit master.cf - change /usr/local/bin/maildrop to /usr/bin/maildrop</p>\n<p>1c.Add this to /etc/postfix/main.cf:</p>\n</p><pre>\ntransport_maps = mysql:/etc/postfix/mysql-transport.cf\n<p>virtual<em>transport = $transport</em>maps</p>\n<p>maildrop<em>destination</em>recipient_limit = 1</pre></p>\n<ol start=\"2\">\n<li>change transport in database to be maildrop: instead of virtual:</li>\n<li>Edit /etc/maildrop/maildropmysql.cf</li>\n<li>Install courier-maildrop plugin</li>\n<li>Config courier-maildrop plugin</li>\n<li>Edit /etc/maildroprc</li>\n<li>\n<p>Add .mailfilter to home directory:<p></p></p>\n<p></p><pre>\nif (/^X-Spam-Flag: *YES/){\n# log this spam mail\nlog \"SPAM date: $DATE, recipient: $RECIPIENT, sender: $SENDER -&gt; /dev/null\"    to \"/dev/null\"\n# nothing more to do\nexit\n}\n`test -f vacation.msg &amp;&amp; exit 1 || exit 0`\nif ($RETURNCODE==1){\n   {\n   if (!/^List-Unsubscribe:.*/:h )\n   {\n           if (!/^X-Spam-Flag: YES/:h )\n           {\n                  #RESPOND=\"$MAILDIR/$USER.autorespond.msg\"\n                  RESPOND=\"vacation.msg\"\n                  RESPONDDB=\"$MAILDIR/$USER.autorespond.db\"\n                  # The following must be one contiguous line\n                  cc \"| mailbot -t $RESPOND -A 'From: $LOGNAME' -s 'Auto Response: from $LOGNAME' /usr/sbin/sendmail -t -f ''\"\n           }\n   }\n   }\n}</pre>\n<h4 id=\"toc2\">Spamassassin:</h4><p>Add to /etc/postfix/master.cf:\n-o content_filter=spamassassin</p>\n</li>\n</ol>","fields":{"slug":"/2006/04/postfix-notes/"},"frontmatter":{"title":"Postfix Notes","date":"April 28th, 2006","tags":"maildrop,postfix"}}},"pageContext":{"slug":"/2006/04/postfix-notes/"}},"staticQueryHashes":["3159585216","758480095"]}