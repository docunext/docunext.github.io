{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2008/04/resizing-filesystems/",
    "result": {"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>There's been some banter on planet debian lately about resizing filesystems (ext3 and reiserfs) so I'm going to try. Turns out a dev-101 (failover-steel) has some openvz ve's which could use some more breathing room.</p>\n<pre class=\"sh_sh\">\nfailover-steel:/home/optimus-prime# vgscan   Reading all physical volumes.\nThis may take a while...\nFound volume group \"big_space\" using metadata type lvm2</pre>\n<p>OK, how about logical volumes?</p>\n<pre class=\"sh_sh\">\nfailover-steel:/home/megatron# lvscan\nACTIVE            '/dev/big_space/bart' [3.91 GB] inherit\nACTIVE            '/dev/big_space/homer' [10.00 GB] inherit\nACTIVE            '/dev/big_space/misc' [2.00 GB] inherit</pre>\n<p>Let's make bart bigger. <a href=\"http://www.docunext.com/2008/03/my-practices-with-openvz/\">Bart is like sid</a></p>\n<ul>\n<li>he'll probably break stuff.</li>\n</ul>\n<p>Now, according to <a href=\"http://www.grep.be/blog/en/computer/cluebat/actually_you_can\">Wouter, I can do something like this</a>:</p>\n<pre class=\"sh_sh\">\nlvresize -L +5G /dev/<hostname>\n/home &amp;&amp; resize2fs /dev/<hostname>\n/home</hostname>\n</hostname>\n</pre>\n<p>I'll start with the lvresize (not lvextend).</p>\n<pre class=\"sh_sh\">\nfailover-steel:/home/starscream# lvresize -L +1G /dev/big_space/bart\nExtending logical volume bart to 4.91 GB  Logical volume bart successfully resized</pre>\n<p>Wow, that was easy! Now how about the filesystem... first I'll stop the ve:</p>\n<pre class=\"sh_sh\">\nfailover-steel:/home/bumblebee# vzctl stop 111\nStopping VE ...\nVE was stopped/usr/lib/vzctl/scripts/vps-functions: line 146: [: del: integer expression expected\nVE is unmounted\nfailover-steel:/home/bumblebee#resize2fs /dev/mapper/big_space-bart\nresize2fs 1.40.6 (09-Feb-2008)\nFilesystem at /dev/mapper/big_space-bart is mounted on /var/lib/vz/private/111; on-line resizing required\nold desc_blocks = 1, new_desc_blocks = 1\nPerforming an on-line resize of /dev/mapper/big_space-bart to 1286144 (4k) blocks.\nThe filesystem on /dev/mapper/big_space-bart is now 1286144 blocks long.</pre>\n<p>Wow, that took hardly any time at all! I even did it again with the ve still running, that's very impressive. I've been using lvm2 for awhile without too much fanfare, thought I had heard so many good things about it, and had definitely run into problems where my filesystems were the wrong size enough times I tried it out. Now I'm a believer. :-)</p>\n<p>More: <a href=\"http://www.docunext.com/\">LVM at the Docunext Wiki</a></p>\n<p>Note - Slightly different with reiserfs:</p>\n<pre>resize_reiserfs -s +500M /dev/morex/test</pre>\n<p>Also - I tried shrinking an online ext3 volume. I now feel like that was a very bad idea, and will not try again.</p>","fields":{"slug":"/2008/04/resizing-filesystems/"},"frontmatter":{"title":"Resizing Filesystems","date":"April 17th, 2008","tags":"file systems,lvm,storage"}}},"pageContext":{"slug":"/2008/04/resizing-filesystems/"}},
    "staticQueryHashes": ["3159585216","758480095"]}