{"componentChunkName":"component---src-templates-blog-post-js","path":"/2008/06/phpinterpreter/","result":{"data":{"site":{"siteMetadata":{"domain":"https://www.docunext.com"}},"markdownRemark":{"html":"<p>This looks very interesting... should be helpful in getting me more acquainted with perl. To install on Lenny, I first installed php5-dev, but unfortunately that still didn't do it. Looks like this module needs the --embed option set in the php interpreter to be used. Going to have to hold of on this to install it on a testing environment rather than a development machine.</p>\n<p>Now I'm trying to get PHP installed in such a way I can use it... I tried getting the perl makefile to use the php headers installed by debian, but it wants to look in /usr/local/*. Hmmm.</p>\n<p>UPDATE: I was able to get this going. :-)</p>\n<ul>\n<li>php-5.2.6* ./configure --enable-embed=shared --enable-maintainer-zts</li>\n<li>make</li>\n<li>make install</li>\n</ul>\n<p>That put the new php into /usr/local. Then I installed PHP::Interpreter manually after trying to get it via CPAN, which didn't happen. When I tried to use it, I got complaints about Exporter, so I added that as a use include, and it worked! Getting it to work with mod_perl and even as a regular cgi-bin file was challenging, but I got it to go:</p>\n<h4>CGI</h4>\n<pre class=\"sh_perl\">#!/usr/bin/perl\nuse Exporter;\nuse PHP::Interpreter;\nprint \"Content-Type: text/html\\\nn\\\nn\";\nmy $php = PHP::Interpreter-&gt;new();\nmy $old_hander = $php-&gt;set_output_handler(\\\n$scalar);\nmy $output = $php-&gt;eval(q^ phpinfo(); ^);\nmy $outbuf = $php-&gt;get_output;\nprint $outbuf;</pre>\n<h4>mod_perl</h4>\n<pre class=\"sh_perl\">\nsub handler {\n  my $r = shift;\n  my $php = PHP::Interpreter-&gt;new();\n  my $scalar;\n  my $old_hander = $php-&gt;set_output_handler(\\\n$scalar);\n  my $output = $php-&gt;eval(q^ phpinfo(); ^);\n  my $outbuf = $php-&gt;get_output;\n  $r-&gt;print($outbuf);\n  return Apache2::Const::OK;\n}</pre>\n<p>Why bother doing this? The novelty of it is pretty good by itself!</p>\n<p>Next up, a more challenging configuration setup:</p>\n<pre class=\"sh_sh\">\n    --enable-embed=shared \\\n    --enable-maintainer-zts \\\n    --disable-rpath \\\n    --disable-static \\\n    --with-pic \\\n    --with-pear=/usr/share/php \\\n    --enable-calendar \\\n    --enable-sysvsem \\\n    --enable-sysvshm \\\n    --enable-sysvmsg \\\n    --enable-bcmath \\\n    --with-bz2 \\\n    --enable-ctype \\\n    --without-gdbm \\\n    --with-iconv \\\n    --enable-ftp \\\n    --with-gettext \\\n    --enable-mbstring \\\n    --enable-shmop \\\n    --enable-sockets \\\n    --enable-wddx \\\n    --with-libxml-dir=/usr \\\n    --with-xsl=/usr \\\n    --with-zlib \\\n    --with-openssl=/usr \\\n    --enable-zip</pre>\n<p>The Server API \tHam and Cheese ?</p>\n<p>External Links</p>\n<ul>\n<li><a href=\"http://search.cpan.org/dist/PHP-Interpreter/lib/PHP/Interpreter.pm\">cpan.org/dist/PHP-Interpreter/lib/PHP/Interpreter.pm</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=612502\">http://www.perlmonks.org/?node_id=612502</a></li>\n<li><a href=\"http://search.cpan.org/src/GSCHLOSS/PHP-Interpreter-1.0.1/README\">http://search.cpan.org/src/GSCHLOSS/PHP-Interpreter-1.0.1/README</a></li>\n</ul>\n<p>Â¥</p>","fields":{"slug":"/2008/06/phpinterpreter/"},"frontmatter":{"title":"PHP Interpreter","date":"June 25th, 2008","tags":"perl,php"}}},"pageContext":{"slug":"/2008/06/phpinterpreter/"}}}