<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">ntfsprogs ntfsresize and ntfsclone</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2007/02/ntfsprogs-ntfsresize-and-ntfsclone/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2007/02/ntfsprogs-ntfsresize-and-ntfsclone/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>ntfsprogs ntfsresize and ntfsclone</h2><div class="blogPostDate">February 18th, 2007</div><div><p>I found out about ntfsprogs from a website about dd, and then I found a great website talking about using ntfsresize and ntfsclone with a Bootcamp partition. After working on 20GB images, I got fed up, compressed one with qcow to 12GB, and now resizing the original partition (yes, on the actual hard drive - yikes!) from 20GB to 8GB. It  took a LONG time, at least an hour. In the last few percentage points, it seemed to hang, but it eventuall cranked up to 100%. This is what it looks like:</p>
<pre>root# sudo ./ntfsresize-intel -s 8000M /dev/disk3s1

ntfsresize v1.13.1 (libntfs 9:0:0)

Device name        : /dev/disk3s1

NTFS volume version: 3.1

Cluster size       : 4096 bytes

Current volume size: 19995619840 bytes (19996 MB)

Current device size: 19995623424 bytes (19996 MB)

New volume size    : 7999996416 bytes (8000 MB)

Checking filesystem consistency ...

100.00 percent completed

Accounting clusters ...

Space in use       : 6252 MB (31.3%)

Collecting resizing constraints ...

Needed relocations : 736487 (3017 MB)

WARNING: Every sanity check passed and only the dangerous operations left.

Make sure that important data has been backed up! Power outage or computer

crash may result major data loss!

Are you sure you want to proceed (y/[n])? y

Schedule chkdsk for NTFS consistency check at Windows boot time ...

Resetting $LogFile ... (this might take a while)

Relocating needed data ...

100.00 percent completed

Updating $BadClust file ...

Updating $Bitmap file ...

Updating Boot record ...

Syncing device ...

Successfully resized NTFS on device '/dev/disk3s1'.

You can go on to shrink the device for example with Linux fdisk.

IMPORTANT: When recreating the partition, make sure that you  1)  create it at the same disk sector (use sector as the unit!)  2)  create it with the same partition type (usually 7, HPFS/NTFS)  3)  do not make it smaller than the new NTFS filesystem size  4)  set the bootable flag for the partition if it existed before

Otherwise you won't be able to access NTFS or can't boot from the disk!

If you make a mistake and don't have a partition table backup then you

can recover the partition table by TestDisk or Parted's rescue mode.</pre>
<p>¥</p></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2007/02/ntfsprogs-ntfsresize-and-ntfsclone/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>