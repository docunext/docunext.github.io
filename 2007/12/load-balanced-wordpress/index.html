<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">Load Balanced Wordpress</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2007/12/load-balanced-wordpress/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2007/12/load-balanced-wordpress/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>Load Balanced Wordpress</h2><div class="blogPostDate">December 16th, 2007</div><div><p>I've recently setup Wordpress high availability cluster using a pfSense load balancer. It works great, most of the time. There are definitely some issues with spam karma 2, but that's not the point of this post.</p>
<p>I'm having an issue where sometimes the only page that is displayed on the admin interface is something along the lines of "your new theme has been activated". This is very strange to me, as I have the database connector set to use the master database when the wp-admin pages are being used.</p>
<p>I thought the issue might have something to do with sessions, which can sometimes be messed up by high availability systems, but I'm using memcache to store the php sessions, which leads me to believe the wordpress sessions are tracked some other way. I'd imagine that they are tracked using the database, but if I'm only using one database, why should that matter?</p>
<p>Here's some Apache logs tracking the process:</p>
<pre class="sh_log">www.internetfloorplans.com  [17/Dec/2007:07:38:19 -0500] "GET /blog/wp-admin/ HTTP/1.1" 301 192
www.internetfloorplans.com  [17/Dec/2007:07:38:19 -0500] "GET /blog/wp-admin/index.php HTTP/1.1" 302 20
www.internetfloorplans.com  [17/Dec/2007:07:38:20 -0500] "GET /blog/wp-admin/themes.php?activated=true HTTP/1.1" 302 20
www.internetfloorplans.com  [17/Dec/2007:07:38:20 -0500] "GET /blog/wp-login.php?redirect_to=%2Fblog%2Fwp-admin%2Fthemes.php%3Factivated%3Dtrue HTTP/1.1" 200 916
www.internetfloorplans.com  [17/Dec/2007:07:38:20 -0500] "GET /blog/wp-admin/wp-admin.css?version=2.1.3 HTTP/1.1" 200 4855
www.internetfloorplans.com  [17/Dec/2007:07:38:20 -0500] "GET /blog/wp-admin/images/login-bkg-tile.gif HTTP/1.1" 200 19279
www.internetfloorplans.com  [17/Dec/2007:07:38:23 -0500] "POST /blog/wp-login.php HTTP/1.1" 302 20
www.internetfloorplans.com  [17/Dec/2007:07:38:23 -0500] "GET /blog/wp-admin/themes.php?activated=true HTTP/1.1" 200 7308
www.internetfloorplans.com  [17/Dec/2007:07:38:24 -0500] "GET /blog/wp-admin/images/wordpress-logo.png HTTP/1.1" 200 2345
</pre></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2007/12/load-balanced-wordpress/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>