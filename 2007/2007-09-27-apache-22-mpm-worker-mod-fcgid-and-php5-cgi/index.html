<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:87.5%/1.714 'Open Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.73);font-family:'Open Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.32578rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.20684rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.91028rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.86849rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}ul{margin-left:1.714rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;list-style-position:outside;list-style-image:none;list-style:disc outside;}ol{margin-left:1.714rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;list-style-position:outside;list-style-image:none;list-style:decimal outside;}dl{margin-left:1.714rem;margin-right:1.714rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.714rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;font-size:0.91028rem;line-height:1.714rem;border-collapse:collapse;width:100%;color:hsla(0,0%,0%,0.54);}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}blockquote{margin-left:1.714rem;margin-right:1.714rem;margin-top:0;padding-bottom:1.714rem;padding-left:1.714rem;padding-right:1.714rem;padding-top:1.714rem;margin-bottom:1.714rem;font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.714rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.714rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;text-transform:uppercase;color:hsla(0,0%,0%,0.61);}li{margin-bottom:calc(1.714rem / 2);margin-left:2.571rem;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.714rem;margin-bottom:calc(1.714rem / 2);margin-top:calc(1.714rem / 2);}li > ul{margin-left:1.714rem;margin-bottom:calc(1.714rem / 2);margin-top:calc(1.714rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.714rem / 2);}code{font-size:0.85rem;line-height:1.714rem;}kbd{font-size:0.85rem;line-height:1.714rem;}samp{font-size:0.85rem;line-height:1.714rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.14267rem;padding-right:1.14267rem;padding-top:0.857rem;padding-bottom:calc(0.857rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}ol,ul{margin-left:0;}a{color:#21759b;}a:hover{color:#0f3647;}a:visited{color:#9f9f9f;}</style><meta name="generator" content="Gatsby 2.4.2"/><title data-react-helmet="true">Apache 2.2 FastCGI PHP5</title><link href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-371962de4ba4b42f9ffa.js"/><link as="script" rel="preload" href="/app-5ec87e77ead86fee3c97.js"/><link as="script" rel="preload" href="/0-b5f1137dd01bca5d8277.js"/><link as="script" rel="preload" href="/1-3a468d43cbb97e26d44a.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-4cc1195d48f2fcf23ecc.js"/><link as="fetch" rel="preload" href="/static/d/372/path---2007-2007-09-27-apache-22-mpm-worker-mod-fcgid-and-php-5-cgi-bf-1-223-ANsLQLEvjI6Sas63WNuKTnS0o.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style data-emotion-css="1ycjowu">.css-1ycjowu{margin:0 auto;max-width:700px;padding:3.428rem;padding-top:2.571rem;}</style><div class="css-1ycjowu"><header style="margin-bottom:1.5rem"><a href="/"><style data-emotion-css="14036a">.css-14036a{margin-top:0;margin-bottom:1.714rem;display:inline-block;font-style:normal;}</style><h1 class="css-14036a">Docunext</h1></a><ul style="list-style:none;float:right"><style data-emotion-css="146q31f">.css-146q31f{float:right;}</style><li style="display:inline-block;margin-right:1rem"><a href="/about/">About</a></li></ul></header><hr/><div><h2>Apache 2.2 FastCGI PHP5</h2><div><p>I've finally found my favorite web server setup. Like the title suggests, its Apache 2.2 MPM worker, mod_fcgid, and php5-cgi. Why?</p>
<h3>Apache 2.2</h3>
<p>I've been using Apache for <b>years</b> and I've learned a lot about its benefits and oddities. I'm really comfortable with the configurations and how to make it do what I want. As I've written about several times, there are a few Apache 2 modules I'm really excited about: mod<em>dbd, mod</em>proxy, and mod_cache.</p>
<p>Make no mistake, I'm also really interested in both mini_httpd and lighttpd, but for now I'm going to stick with what I'm comfortable with.</p>
<h3>mod_fcgid</h3>
<p>For years I used mod<em>php4/5, but then more recently as I started to use other cgi scripts such as python (for trac) and perl, it made sense to use fastcgi. Since I use debian, there are two choices, mod</em>fastcgi and mod<em>fcgid. mod</em>fastcgi is considered non-free because of some wacky licensing issues, and in my experience mod<em>fcgid is much much faster, though I may have misconfigured mod</em>fastcgi. By using fastcgi, you can use the mpm worker, which has improved performance and memory management over mpm prefork. This is due to the fact that while php5 is threadsafe, third party modules are not likely to be. Also, by using mod_fastcgi, you end up being able to use a variety of different scripting languages, ruby, python, php5, php4, perl, and even compiled C and C++ binaries.</p>
<p>Setting up mod<em>fcgid was really frustrating to me for awhile, so I'm posting my experience in the &#x3C;a href="<a href="http://www.docunext.com/wiki/Apache">http://www.docunext.com/wiki/Apache</a></em>FastCGI">Docunext Wiki under Apache FastCGI</a>.</p>
<h3>php5-cgi</h3>
<p>PHP5 is a great scripting language in my opinion. I like it not only for the syntax and capabilities, but also the community and external libraries.</p>
<p>One potential drawback to using php5 in cgi mode is the potential to not be able to use opcode cachers like xcache. The catch here is to setup the cgi processes to share memory. I think this is possible due to some posts at the lighty wiki and forums, but I haven't wrapped my mind around it yet.</p>
<p>There are other differences between using php5 via mod_php5 and php5-cgi, including output buffering and a few server variables.</p></div><div><span>Yearly Indexes: </span><span><style data-emotion-css="nn640c">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a class="css-nn640c" href="/2003"><style data-emotion-css="18jhzrq">.css-18jhzrq{margin-bottom:0.4285rem;}</style><span class="css-18jhzrq">2003</span></a> </span><span><a class="css-nn640c" href="/2004"><span class="css-18jhzrq">2004</span></a> </span><span><a class="css-nn640c" href="/2005"><span class="css-18jhzrq">2005</span></a> </span><span><a class="css-nn640c" href="/2006"><span class="css-18jhzrq">2006</span></a> </span><span><a class="css-nn640c" href="/2007"><span class="css-18jhzrq">2007</span></a> </span><span><a class="css-nn640c" href="/2008"><span class="css-18jhzrq">2008</span></a> </span><span><a class="css-nn640c" href="/2009"><span class="css-18jhzrq">2009</span></a> </span><span><a class="css-nn640c" href="/2010"><span class="css-18jhzrq">2010</span></a> </span><span><a class="css-nn640c" href="/2011"><span class="css-18jhzrq">2011</span></a> </span><span><a class="css-nn640c" href="/2012"><span class="css-18jhzrq">2012</span></a> </span><span><a class="css-nn640c" href="/2013"><span class="css-18jhzrq">2013</span></a> </span><span><a class="css-nn640c" href="/2015"><span class="css-18jhzrq">2015</span></a> </span><span><a class="css-nn640c" href="/2018"><span class="css-18jhzrq">2018</span></a> </span><span><a class="css-nn640c" href="/2019"><span class="css-18jhzrq">2019</span></a> </span></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2007-2007-09-27-apache-22-mpm-worker-mod-fcgid-and-php-5-cgi-bf1","path":"/2007/2007-09-27-apache-22-mpm-worker-mod-fcgid-and-php5-cgi/"};window.dataPath="372/path---2007-2007-09-27-apache-22-mpm-worker-mod-fcgid-and-php-5-cgi-bf-1-223-ANsLQLEvjI6Sas63WNuKTnS0o";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5ec87e77ead86fee3c97.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-4cc1195d48f2fcf23ecc.js"],"component---src-templates-year-js":["/component---src-templates-year-js-f50baa2e2be98d49a70d.js"],"component---src-pages-about-js":["/component---src-pages-about-js-72e29ed9e65aaa6a936b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-406036d8303db3c8a7a3.js"],"component---src-pages-my-files-js":["/component---src-pages-my-files-js-510865ef7dc831152c67.js"],"pages-manifest":["/pages-manifest-685804ed81ef9c509c78.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-4cc1195d48f2fcf23ecc.js" async=""></script><script src="/1-3a468d43cbb97e26d44a.js" async=""></script><script src="/0-b5f1137dd01bca5d8277.js" async=""></script><script src="/app-5ec87e77ead86fee3c97.js" async=""></script><script src="/webpack-runtime-371962de4ba4b42f9ffa.js" async=""></script></body></html>