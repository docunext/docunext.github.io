<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">Setting up Duplicity for use with Amazon s S3 on Debian GNU Linux to backup on Dreamhost</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2007/01/s3-duplicity-with-debian/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2007/01/s3-duplicity-with-debian/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>Setting up Duplicity for use with Amazon s S3 on Debian GNU Linux to backup on Dreamhost</h2><div class="blogPostDate">January 29th, 2007</div><div><p>To review the last post of backing up to dreamhost and s3 with duplicity, here is  clearer summary of what is necessary to get duplicity working with s3, as I figured it out on the fly and I'm sure my notes are confusing.</p>
<h3>Howto get Duplicity with S3 working on Debian</h3><ol><li>Install rdiff-backup</li>
<pre>apt-get install rdiff-backup</pre><li>Install bitbucket</li>
<pre>cd /usr/src/

wget http://cheeseshop.python.org/packages/source/B/BitBucket/BitBucket-0.4a.tar.gz

tar -xzvf BitBucket-0.4a.tar.gz

cd BitBucket-0.4a

python setup.py install</pre><li>Get CVS checkout of duplicity</li>
<pre>cd /usr/src/

cvs -z3 -d:pserver:anonymous@cvs.savannah.nongnu.org:/sources/duplicity co duplicity

cd duplicity</pre><li>Copy _librsync.so to duplicity folder (or if you can compile it with what is provided in the CVS source, I couldn't get it to compile)</li>
<pre>cp /var/lib/python-support/python2.4/rdiff_backup/_librsync.so /usr/src/duplicity/duplicity/</pre><li>Then create a bash script to put it all together. I used the script provided by <a href="http://labora.harnvi.net/?p=34">Labora</a>:</li></ol>
<blockquote>#!/bin/sh
<p>export S3KEY=[key]</p>
<p>export S3SECRET=[secret]/usr/local/share/duplicity/duplicity-bin --include-filelist="backuplist.txt" / s3+<a href="http://my-bucket">http://my-bucket</a></blockquote></p>
<p>Thanks again labora - your post got this all started!</p>
<p>Author's notes:</p>
<ul><li>It is assumed you have an S3 account, if not go to <a href="http://aws.amazon.com">Amazon's Web Services Page</a> and sign up.</li><li>It is assumed you are comfortable with linux and debian.</li><li>I download and install new software into /usr/src/ and so the code above uses those path prefixes, you can install to a different location if your environment requirements dictate it.</li><li>I have uploaded the packages referenced in this article just in case the others are for some reason unavailable to you. Unfortunately, I don't know how to sign the files (yet) with an MD5 hash so you'll either have to trust me, be able to check their integrity on your own, or not use them.</li></ul>
<h3>Duplicity Files:</h3><del>bitbucket-0.4a.tar.gz</del><del>duplicity.zip</del> (includes _librysnc.so for x86, 32-bit platforms)
<p>UPDATE November 2007: Files removed, I never used them again.</p></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2007/01/s3-duplicity-with-debian/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>