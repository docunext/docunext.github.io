<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">LDAP Notes</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2006/11/ldap-notes/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2006/11/ldap-notes/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>LDAP Notes</h2><div class="blogPostDate">November 1st, 2006</div><div><p>Wow LDAP is confusing. To boot, I'm using LDAP with a MySQL back-end. I may try an LDAP server with a standard back end too, just to see if it is any different.</p>
<p>I also bought LDAP System Adminstration to see if that helps out at all.</p>
<p><strong>Basic installation of slapd on Debian</strong>:</p><ol>    <li>apt-get install slapd ldap-utils</li>    <li>Agree to the suggestions</li>    <li>Test with ldapsearch returns nothing, test with ldapsearch and base reference returns some basic stuff.</li>    <li>Insert some data with ldapadd from a basic ldif file</li></ol><p>Can't seem to authenticate from Mac OS X, it keeps searching for a dn with cd=cram-md5 or something. Argh. Trying out libpam_ldap to see if I can learn anything there. It appears that slapd defaults to sasl if it can't get the pw from the database. Hmmmm.</p>
<p>Authentication is a pain! First you need to authenticate to the ldap server, then you need to authenticate to the machine. Confusing, yes.
<p>I keep getting this error:</p>
<pre>
Error: unable to open Berkeley db </pre></p>
<pre>
ldapsearch -x -ZZ -h hostname.com -b &quot;&quot; -s base -LLL supportedSASLMechanisms</pre><p>But I don't want to connect to berkleydb. I want to connect to pam_mysql.
<p>Force sasl to ignore other modules:
<p><a href="http://www.sendmail.org/~ca/email/cyrus2/options.html" onclick="window.open(this.href, '_blank'); return false;"><a href="http://www.sendmail.org/~ca/email/cyrus2/options.html">http://www.sendmail.org/~ca/email/cyrus2/options.html</a></a></p></p>
<p>OK, so its a Cyrus Sasl error really, and I don't want to go round about to pam, I just want to authenticate with sasl to the ldap directory. Ugh.</p>
<p>FINALLY! Special thanks goes to: <a href="http://www.jimmy.co.at/weblog/?p=52" onclick="window.open(this.href, '_blank'); return false;">http://www.jimmy.co.at/weblog/?p=52</a> who reminded me that the sasl socket is owned by the sasl group, because postfix runs in its own jail. Since openldap does too, I had to add it to the sasl database! No more:
<pre>
Failure: cannot connect to saslauthd server: Permission denied</pre></p>
<p>Now I can authenticate to the ldap server using data WITHIN its back-end. Now that I understand it a little better, its awesome. Next up: remote authentication, indexing, and replication!</p>
<p>AWESOME! I am now able to authenticate to the LDAP server from Mac OS X! Now that most everything is working, I'd like to revisit the process and document it properly. So far, these are the components I'm working with:</p>
<ul>    <li>Linux: OpenLdap slapd, Back-sql mysql, Cyrus SASL</li>    <li>Mac: Directory Access, Address Book (for testing purposes) - N.B. - I changed all the connection and query timeouts to much less than 120 (I use 10) so that testing is easier. </li></ul><p>I also noticed something very strange about my ldap administration book, on page 59, the content shifts to another book about hardware! Here's what I sent to Amazon:
<p>The book is printed incorrectly, about half the book is from some other book, talking about computer architecture. Two chapters are missing. It goes from page 60, to 59, and then on page 106, it skips to page 109. Very strange. Please just send a replacement. Thanks.</p></p></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2006/11/ldap-notes/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>