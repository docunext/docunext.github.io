{"data":{"markdownRemark":{"html":"<p>I'm finally trying out mathopd and its surprisingly nice and flexible considering how small it is.</p>\n<p>I'm especially pleased it handles path_info correctly.</p>\n<p>I tried using it with Mailman and was getting blank pages. I thought it surely must be my mathopd.conf setup. Nope!</p>\n<p>Turns out it was my proxy setup. I go from NGINX to Varnish, and then to Mathopd, and for whatever reason, Varnish can't handle the response. My guess is that its due to buffering, but I've tried a few different buffering settings in /etc/mathopd.conf, but the only thing that made a different was setting the input buffer too small resulted in the error log:</p>\n<pre>\nFri Oct 23 19:34:35 2009 [25287] input buffer full\n</pre>\n<p>I was never able to debug this properly, but I did find a VCL setup I like:</p>\n<pre>\nif (req.url ~ \"/lists\" || req.url ~ \"/cgi-bin/mailman\" || req.url ~ \"/images/mailman/\") {\n\n        set req.backend = mailman;\n        if (req.request != \"GET\" && req.request != \"HEAD\") {\n            pipe;\n        } else {\n            lookup;\n        }\n\n    }\n</pre>","frontmatter":{"title":"Mathopd Mailman Varnish Huh"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2009/2009-10-23-mathopd-mailman-varnish-huh/"}}