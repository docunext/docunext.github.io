{"data":{"markdownRemark":{"html":"<h3 id=\"toc0\">Postfix Vacation Autoresponder Howto</h3>\n<h4 id=\"toc1\">Setting up courier-vacation:</h4>\n<p>1. Needs maildrop - emerge maildrop\n<p>1b.Need to edit master.cf - change /usr/local/bin/maildrop to /usr/bin/maildrop</p>\n<p>1c.Add this to /etc/postfix/main.cf:</p>\n</p><pre>\ntransport_maps = mysql:/etc/postfix/mysql-transport.cf\n<p>virtual<em>transport = $transport</em>maps</p>\n<p>maildrop<em>destination</em>recipient_limit = 1</pre></p>\n<ol start=\"2\">\n<li>\n<p>change transport in database to be maildrop: instead of virtual:</p>\n</li>\n<li>\n<p>Edit /etc/maildrop/maildropmysql.cf</p>\n</li>\n<li>\n<p>Install courier-maildrop plugin</p>\n</li>\n<li>\n<p>Config courier-maildrop plugin</p>\n</li>\n<li>\n<p>Edit /etc/maildroprc</p>\n</li>\n<li>\n<p>Add .mailfilter to home directory:<p></p></p>\n<p></p><pre>\nif (/^X-Spam-Flag: *YES/){\n# log this spam mail\nlog \"SPAM date: $DATE, recipient: $RECIPIENT, sender: $SENDER -&gt; /dev/null\"    to \"/dev/null\"\n# nothing more to do\nexit\n}\n`test -f vacation.msg &amp;&amp; exit 1 || exit 0`\nif ($RETURNCODE==1){\n   {\n   if (!/^List-Unsubscribe:.*/:h )\n   {\n           if (!/^X-Spam-Flag: YES/:h )\n           {\n                  #RESPOND=\"$MAILDIR/$USER.autorespond.msg\"\n                  RESPOND=\"vacation.msg\"\n                  RESPONDDB=\"$MAILDIR/$USER.autorespond.db\"\n                  # The following must be one contiguous line\n                  cc \"| mailbot -t $RESPOND -A 'From: $LOGNAME' -s 'Auto Response: from $LOGNAME' /usr/sbin/sendmail -t -f ''\"\n           }\n   }\n   }\n}</pre>\n<h4 id=\"toc2\">Spamassassin:</h4><p>Add to /etc/postfix/master.cf:\n-o content_filter=spamassassin</p><h4 id=\"toc3\">Postfix related links: </h4><p><a href=\"http://gentoo-wiki.com/Maildrop_configuration#Autoreply\" rel=\"nofollow\">http://gentoo-wiki.com/Maildrop_configuration#Autoreply</a></p>\n</li>\n</ol>","frontmatter":{"title":"Postfix Notes","date":"April 28th, 2006"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2006/2006-04-28-postfix-notes/"}}