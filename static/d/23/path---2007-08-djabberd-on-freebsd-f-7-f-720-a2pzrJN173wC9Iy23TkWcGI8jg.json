{"data":{"markdownRemark":{"html":"<p>I'm trying to install DJabberd on FreeBSD. I followed: <a href=\"http://osterman.com/wordpress/2007/08/11/djabberd-debian-howto\"></p>\n<p>http://osterman.com/wordpress/2007/08/11/djabberd-debian-howto</a></p>\n<p>and adjusted for FreeBSD layout.</p>\n<pre class=\"sh_sh\">cd /usr/ports/net-im/p5-DJabberd\nmake install clean</pre>then:\n<pre class=\"sh_sh\">mkdir /usr/local/etc/djabberd/</pre>\n<p>and saved this as djabberd.conf:</p>\n<pre class=\"sh_sh\">OldSSL  enable\n# health checks from this IP (directive can be repeated) won't log and\n# won't allocate a connection id\nDeclareMonitor 127.0.0.1\nAdminPort 5200\nClientPort 5222\nServerPort 5269\nSSLCertificateFile    /usr/local/etc/djabberd/server-cert.pem\nSSLCertificateKeyFile /usr/local/etc/djabberd/server-key.pem\n&lt;vhost alliance.com=\"\"&gt;\n  S2S enable\n  RequireSSL yes\n  &lt;plugin djabberd::authen::htdigest=\"\"&gt;\n    Realm djabberd\n    HtDigest /usr/local/etc/djabberd/djabberd.users\n  &lt;/plugin&gt;\n  &lt;plugin djabberd::rosterstorage::sqlite=\"\"&gt;\n    Database /usr/local/etc/djabberd/djabberd.sqlite\n  &lt;/plugin&gt;\n  &lt;plugin djabberd::authen::mysql=\"\"&gt;\n    DBName               djabberd\n    DBHost               127.0.0.1\n    DBPort               6723\n    DBUsername           dbusername\n    DBPassword           dbpassword\n    DBTable              user\n    DBUsernameColumn     username\n    DBPasswordColumn     password\n    DBEncryptedPasswords 1    DBWhere              canjabber = 1\n  &lt;/plugin&gt;\n&lt;/vhost&gt;\n</pre>\n<pre class=\"sh_sh\">openssl req -x509 -newkey rsa:1024 -keyout /usr/local/etc/djabberd/server-key.pem -out \\ /usr/local/etc/djabberd/server-cert.pem -days 365 -nodes\ndjabberd --conf=/usr/local/etc/djabberd/server.conf --daemon</pre>\n<p>The command htdigest didn't work for me because I didn't have it installed, so I used an htpass file from another machine and changed the realm to \"djabberd\".</p>\n<p>OK, to use HTDigest and SQLite, I needed to get the latest subversion code. Also had to copy over the libs:</p>\n<pre class=\"sh_sh\">cp -R DJabberd-Authen-HTDigest/ /usr/local/lib/perl5/5.8.8/\ncp -R DJabberd-RosterStorage-SQLite/lib/DJabberd/ /usr/local/lib/perl5/5.8.8/DJabberd/</pre>\n<p>and install DBI and DBD::SQLite, and DBD::MySQL. In the end, I couldn't get any of that to work, but I did get the very basics to work by using static settings:</p>\n<pre class=\"sh_sh\">  &lt;plugin djabberd::authen::allowedusers=\"\"&gt;\n     Policy accept     AllowedUsers albertlash\n  &lt;/plugin&gt;\n  &lt;plugin djabberd::authen::staticpassword=\"\"&gt;\n      Password password\n  &lt;/plugin&gt;\n</pre>\n<p>This looks like a great alternative to ejabberd! Ouch, I just noticed that offline messages aren't working. Doh!</p>\n<p><a href=\"http://lists.danga.com/pipermail/djabberd/2007-January/000271.html\">danga.com/.../djabberd/2007-January/000271.html</a></p>\n<p>I am still very excited about djabberd as I can actually understand the code! :-) I need to figure out how the configuration file is formatted better.</p>\n<p>I just posted to Erik's blog a note about the HTDigest, you don't need the \"@\" sign or the domain when creating the htdigest file. Also, I just commented on Brad's blog (the author of DJAbberd), and am posting here in case it gets filtered out:</p>\n<blockquote>Hi Brad,\n<p>Great work. I've been using ejabberd for awhile on debian, but am trying to make an ~8-16MB jabber appliance on top of m0n0wall, sort of like askoziapbx, but for jabber. While ejabberd on debian has its niceties (like registration and offline messages), running erlang on freebsd (minibsd) on an embedded device is much harder than perl.</p>\n<p>FYI - found out about your work via the news that MT4 will be GPL. That's great news! - Docunext</blockquote></p>\n<p>WAIT! DJabberd DOES have offline storage! :-) :-) :-)</p>\n<p><a href=\"http://search.cpan.org/%7Epiers/DJabberd-Delivery-OfflineStorage-0.02/lib/DJabberd/Delivery/OfflineStorage.pm\">cpan.org/.../OfflineStorage.pm</a></p>\n<p><a href=\"http://search.cpan.org/%7Emisc/DJabberd-Plugin-PrivateStorage-0.60/lib/DJabberd/Plugin/PrivateStorage/SpoolDirectory.pm\">cpan.org/.../PrivateStorage/SpoolDirectory.pm</a></p>\n<p>Â¥</p>","frontmatter":{"title":"DJabberd on FreeBSD","date":"August 15th, 2007"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2007/08/djabberd-on-freebsd/"}}