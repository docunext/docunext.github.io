{"data":{"markdownRemark":{"html":"<p>I wanted a regular expression to parse an (x)HTML snibbet and escape the contents of pre tags, non-greedily.</p>\n<p>Its most likely a multi-line string, so I wanted something with a wider scope than cat and sed. Perl? Probably, but Ruby's object-oriented nature is so wonderful. I tried it, and as usual the regular expressions took a little bit of work, but this is what I came up with:</p>\n<pre class=\"sh_ruby\">mystring = %q{&lt;bodycontent&gt;\n&lt;h2&gt;Greetings!&lt;/h2&gt;\n&lt;p&gt;How are you?&lt;/p&gt;\n&lt;pre&gt;\nhi\n&lt;\n/pre&gt;\n&lt;/pre&gt;\nO\n&lt;pre&gt;OK&lt;br /&gt;&lt;/pre&gt;\n&lt;/bodycontent&gt;\n}\nmystring.gsub!(/&lt;pre&gt;.*?&lt;\\/pre&gt;/m) {|esc|\n&nbsp;&nbsp;&nbsp; esc.gsub('&lt;br /&gt;',\"\\n\").gsub('&lt;','&amp;lt;').gsub(/&amp;lt;(\\/)?pre&gt;/,'&lt;\\1pre&gt;')\n}\nputs mystring\n</pre>","frontmatter":{"title":"Another Ruby Moment","date":"August 22nd, 2009"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2009/08/another-ruby-moment/"}}