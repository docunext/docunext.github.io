### Uses
The exciting thing about this script in my humble opinion is ability to use it
in conjunction with [[/email/perdition]] and [[/email/offlineimap]] to
synchronize a [[/email/Maildir]] upon login. Cool huh?

Here's what I've got in the works for /etc/pam-script/pam_script_auth:

~~~
#!/bin/bash
PAM_SCRIPT_LOG="/tmp/pam_hook"
echo "" >> $PAM_SCRIPT_LOG
echo "auth type: $PAM_TYPE" >> $PAM_SCRIPT_LOG
echo "`date`" >> $PAM_SCRIPT_LOG
echo "tty: $PAM_TTY" >> $PAM_SCRIPT_LOG
echo "my id: `id`" >> $PAM_SCRIPT_LOG
echo "uid: $PAM_USER" >> $PAM_SCRIPT_LOG
echo "pass: $PAM_AUTHTOK" >> $PAM_SCRIPT_LOG
echo "running command: su vmail -c 'offlineimap -a $PAM_USER'" >> $PAM_SCRIPT_LOG
if [ $PAM_SERVICE = "perdition" ]; then
        echo "service: $PAM_SERVICE" >> $PAM_SCRIPT_LOG
        su vmail -c "offlineimap -u Noninteractive.Basic -a $PAM_USER" >> $PAM_SCRIPT_LOG
fi
exit 0
~~~

PAM_AUTHTOK isn't working for whatever reason, but it shouldn't matter. Hmm, its
not working... maybe it should not be run with su vmail?

OK, now its working!

### Mentors Email
I just emailed the mentors list in hopes of getting some suggestions on how to get this package included:

> Hello Mentors!
> 
> I'm wondering if there is anything I can do to help get this package
> approved for inclusion in the main Debian repositories:
> 
> http://mentors.debian.net/cgi-bin/sponsor-pkglist?action=details;package=libpam-script
> 
> It can be used to do some very cool things, including synchronizing
> non-shell email accounts when a user authenticates over POP3 or IMAP,
> triggering OfflineIMAP to sync with a redundant IMAP server.
> 
> Thanks for any suggestions,
> 
> Albert

### Author Emails

I've just emailed Izak again suggesting an [[incron]] like tab file:

> Just an idea: a crontab like file for use with libpam-script, modeled after incron and incrontab.
> 
> http://dailypackage.fedorabook.com/index.php?/archives/102-Productive-Monday-Incron-Execute-commands-based-on-filesystem-activity.html
> 
> That way a single table could contain each of the pam actions, and might even be able to support some pretty sophisticated matching:
> 
>     USER  SERVICE  ACTION   COMMAND
>     bob   sshd     account  /usr/bin/csync2 -xv....
