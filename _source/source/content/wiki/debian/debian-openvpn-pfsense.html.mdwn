These are the settings I'm using to connect a [[Debian]] machine to a [[pfSense]] firewall. I'm using it for one-point to a site, meaning that I want the client to see all the LAN clients the server is connected to, but their is no LAN on the client side.

### One Server, One Client
#### Debian

##### /etc/openvpn/ok.conf

    remote openvpn.example.com
    ifconfig 192.168.21.50 192.168.21.49
    port 1194
    dev tun0
    secret static.key
    comp-lzo
    up /etc/openvpn/scripts/opvn-ok.sh

##### /etc/init.d/openvpn

~~~
# This is the configuration file for /etc/init.d/openvpn

#
# Start only these VPNs automatically via init script.
# Allowed values are "all", "none" or space separated list of
# names of the VPNs. If empty, "all" is assumed.
#
AUTOSTART="ok"
#AUTOSTART="none"
#AUTOSTART="home office"
#
# Refresh interval (in seconds) of default status files
# located in /var/run/openvpn.$NAME.status
# Defaults to 10, 0 disables status file generation
#
#STATUSREFRESH=10
#STATUSREFRESH=0
# Optional arguments to openvpn's command line
OPTARGS="--script-security 3 system"
~~~

##### /etc/openvpn/scripts/opvn-glass.conf

~~~
#!/bin/sh
ip route add 192.168.8.0/24 via 192.168.21.49 dev tun0
~~~

#### [[pfSense]]

<br/><br/>


I had to set my [[MTU]] even lower (from 1482 to 1420) to get this to work over
[[FIOS]].

The above worked fine with one client, but when I wanted to add more I realized
that [[OpenVPN]] requires [[PKI]] instead of just a shared key.

#### Errors

~~~
Jun 18 23:03:07 	openvpn[19080]: x.x.x.x:47263 Re-using SSL/TLS context
Jun 18 23:03:07 	openvpn[19080]: x.x.x.x:47263 LZO compression initialized
Jun 18 23:03:08 	openvpn[19080]: x.x.x.x:47263 VERIFY ERROR: depth=0, error=unsupported certificate purpose: /C=US/ST=MA/L=/O=/CN=vpn-open.example.com/emailAddress=support@example.com
Jun 18 23:03:08 	openvpn[19080]: x.x.x.x:47263 TLS_ERROR: BIO read tls_read_plaintext error: error:140890B2:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:no certificate returned
Jun 18 23:03:08 	openvpn[19080]: x.x.x.x:47263 TLS Error: TLS object -> incoming plaintext read error
Jun 18 23:03:08 	openvpn[19080]: x.x.x.x:47263 TLS Error: TLS handshake failed
~~~

Resolution? I accidentally used ./build-key-server instead of simply
./build-key. I tried again, but then got:

    failed to update database
    TXT_DB error number 2

* http://gozer.ectoplasm.org/blog/archive/2007/07/openvpn_verify.html
* http://sial.org/howto/openssl/ca/
* http://mtehrani30.blogspot.com/2008/03/openvpn-clientss-static-ip.html

### IP Address Distribution

* ifconfig-pool-linear
