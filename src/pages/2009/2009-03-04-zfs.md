---
title: ZFS 
comments:
  - author: Bert JW Regeer
    email: xistence@gmail.com
    url: http://personal.x-istence.com/
    date: 03/04/2009 11:51:43 PM
    text: >
      Why should Sun be required to release their file system under a GPL compatible license just so that the GNU tards can take it and make it their own? Look at what happened to the wireless drivers that OpenBSD created, they were re-licensed under GPL meaning any new changes could not be brought back into the OpenBSD versions. The people doing so thought it was perfectly fine and so did many of the other Linux users. Yet when an OpenBSD developer had pieces of Linux code in his code so that he could slowly write his own driver for a certain piece of hardware there were harsh cries being made. Take take take, what do you give back?<br/><br/>Linux is not the end all be all open source operating system, I'll be honest, I have not used Linux for any of my contract work in the last year. Everything is FreeBSD. Why? Because the OS is more stable, everything comes as a whole, not everything is yet a different package from a random source. The kernel is generally secure, and so are the userland applications. Major bugs are less frequent and in general the whole thing is more solid because of the way it is put together.<br/><br/>Also, why can't Linus and the Linux kernel adapt and allow other licenses to sit in the kernel along side the rest of the kernel? This seems to be working for Mac OS X, and for FreeBSD. Where you can even choose to include ext2 support, thereby "tainting" your kernel with GPL code. Why can't Linux adapt the same possibility? Seems unfair that Sun should release their file system under a license that would benefit no-one else but the Linux community! What do they end up getting back for it?<br/><br/>Same thing is happening with DTrace, the Linux guys are re-making it from scratch because they like the feature set but they don't like the license. Once again, Mac OS X and FreeBSD seem to have no issues.<br/><br/>All the mainline kernel developers have been doing is putting ZFS down, Andrew Morton for example called it a Rampant Layering Violation (http://lkml.org/lkml/2006/6/9/389) (Jeff Bonwick replies: <a href="http://blogs.sun.com/bonwick/entry/rampant_layering_violation)." rel="nofollow">http://blogs.sun.com/bonwick/entry/rampant_layering_violation).</a> Yet, now btrfs is supposed to make everything better, yet it has those exact same layering violations. What gives?<br/><br/>Sun should and probably will never release ZFS under a GPL or GPL compatible license. It just does not make sense. There is no business need for them to do so, nor is there any return for them when they do. The people that are serious about storage right now are able to use ZFS through Solaris 10, OpenSolaris, FreeBSD, and Mac OS X Server.
  - author: Albert
    email: albert.lash@savonix.com
    date: 03/05/2009 10:37:58 AM
    text: >
      Hi Bert, thanks for commenting! I agree, linux is not the end all be all universal operating system (imho, that's debian, which is expanding to use various kernels including freebsd - and hopefully opensolaris via nexenta).<br/><br/>I'm confused by the OpenBSD wireless drivers part of the story though - software can be dual licensed so that it can play nicely with both GPL and MIT / BSD (CDDL?) licensed software.<br/><br/>The business case I'm suggesting for Sun to consider is developer exposure. I don't have the data to claim this, but I'm under the impression that people new to the open source world would be more likely to try linux via ubuntu, gentoo or fedora, and thus sun would get more exposure. That's all.<br/><br/>DTrace looks cool too! I hope to try it out some time.<br/><br/>PS - I'm started out on DOS, quickly converted to Mac where I stayed for years and years while using linux on servers, then I switched my desktop to linux because OS X was focusing less on computing and more on entertainment. Good for some, not for me. I'm happy with debian and I hope to use FreeBSD and OpenSolaris more in the future.
  - author: Bert JW Regeer
    email: xistence@gmail.com
    url: http://personal.x-istence.com/
    date: 03/05/2009 10:16:55 PM
    text: >
      The OpenBSD crew created a wireless driver. I don't remember which one that was, however the Linux developers came along and slapped the GPL on it and improved upon the driver or changed part of it for the better. Since that part was under the GPL the OpenBSD crew was not allowed to take that change and put it back into their code base because that would have tainted the OpenBSD kernel with GPL code.<br/><br/>The argument at the time was made that it was not Microsoft that the BSD guys had to be afraid of, the company all the Linux crowd will say is going to come along and take our code and use it for themselves, but we should be afraid of the GPL crowd since they will do exactly that what they claim only Microsoft would do.<br/><br/>The other incident was when an OpenBSD developer was writing/reverse engineering a driver for another wireless device. He had taken some code from GPL'ed sources from the Linux kernel to have dummy methods available while he was writing the code, the Linux crowd was up in arms about the fact that now their code would be presumed to be under BSD license and caused a huge ruckus stating it was unfair, they seemed to forget the incident where they did the same and re-licensed it so that code sharing the other way was not possible.<br/><br/>That is one of the reasons that there is such a huge backlash against GPL licensed tools in the various BSD derived OS's. OpenBSD is pretty much replacing the entire GCC tool chain with pcc and llvm, along with various tools like grep, diff and others.<br/><br/>I added that part in to show that the Linux "world" tends to take without wanting to give back in any way shape or form. I wanted to point out that if ZFS were put under a GPL license Sun would not be able to take that work back and put it into their Solaris 10 Operating System since they would have to GPL all of that too. It is too viral. There is a reason the CDDL is not compatible with the GPL, and it is not just because Sun hates the GPL (which is entirely possible) but because any changes they have to be able to claim as their own so that they own the copyright on it outright so that they can then put it back into the proprietary OS, Solaris 10. Yet, it is still available under the CDDL (the code people provide, and Sun's code) allowing others to take it and modify it and distribute it under those terms.<br/><br/>It is not some conspiracy by Sun, but rather good business practice. There is NO reason why the ZFS source code could not be put into the mainline Linux kernel, just like any other file system, along with the appropriate wrapper files to translate from "Solaris" to "Linux" like FreeBSD did to translate from "Solaris" to "FreeBSD". The only reason this does not seem to be an option is that Linus and other developers do not want to see it happen. Sad, yes, since they are missing out. This however is not a case where Sun is being the big bad company, in this case it is the Linux crowd being pathetic and expecting everything that is released to be released on their terms.<br/><br/>As for developer exposure, those that want to work on a file system can do so without any issues. If they don't agree with the license there is a huge assortment of file systems to play with and develop for. Sun has developed ZFS over the last 10 years, they don't have a real need for hundreds of developers that are developing systems ad-hoc. The Linux development that occurs is not what you would want in a commercial entity. ZFS before any changes are created has to go through a board that decides what to add, what not to add. Things are discussed, and carefully checked. Whereas with the Linux kernel if i submit a patch today, and some people take a glance at it and rubber stamp it, it will make it into the next mainline kernel and get shipped. This does not work for a corporate entity where change review requests have to be created.<br/><br/>As for exposure for ZFS, for the home user while ZFS is a cool product and cheap snapshots is neat, it is not really something you would need for the desktop. ZFS is built as an enterprise class file system, with its real power being the features only required in a corporate or serious home user file server type situation. On one single disk ZFS does not provide a whole lot of anything to the table, however give it 48 drives in a Sun Thumper and it will do awesome things that LVM can only wish to do.<br/><br/>So once again, what does Sun gain from additional user exposure that is not its core market? Sun won't gain additional developers overnight if they GPL ZFS, and they would lose their right to use it in a closed-source OS (Solaris 10). That is one big mighty loss, versus very little gained.<br/><br/>As for your PS. I started out on Windows 3.1, Windows 95, Windows 98SE, Windows 2000, Red Hat 5, Windows XP, Debian (Screwed with SSL without knowing what you were doing? Really? Wow!), FreeBSD, OpenBSD, Mac OS X, Windows Vista, OpenSolaris/Solaris 10, Windows 7. Off course I have played with various other Linux distributions throughout that time, however the two listed are the only ones I used extensively for more than a few days to try it out.<br/><br/>They are listed in order of being introduced to me and using them. Yes, I got late to the OpenSolaris/Solaris game and only really considered after seeing ZFS support mature in FreeBSD, it was not mature enough for my needs so I learned a new OS. I am however very much anti-GPL everything. And with that I mean that I dislike the notion that every piece of open source software released should be released under an GPL or GPL compatible license. Several projects that I have worked on in the past have used a license that SPECIFICALLY is not allowed to work with GPL, for example the Mozilla Public License. As a software developer and computer programmer who releases software as open source into the world, I have the choice what license I want to put it under, and no matter how many people ask me to release certain pieces of software under the GPL so that they may use it in their project I won't do it. Why should I be required to change my license just to make it vibe with YOUR license agreement, if you want it so bad make it work from your end. I feel the same way about the ZFS vs Linux kernel developers.<br/><br/>As for Mac OS X being more entertainment oriented, I disagree. It is a full fledged Unix based OS (with roots in Darwin, based on Unix and FreeBSD), that has many of the interfaces and tools that are required for both entertainment and serious business users. I myself am a computer programmer and the fact that I can run the entire GCC tool chain, have all of the POSIX API interfaces available and most of the time can easily take my code working on Mac OS X and compile it on FreeBSD, makes it an absolutely awesome operating system to use. I don't have to mess around with gnome, KDE, xfce or other window managers, I don't have issues with packages not updating correctly, or my system not coming out of hibernation because my hardware is not correctly supported. That is the value added aspect of Mac OS X on a Mac.<br/><br/>I hope that addresses the points you gave me, and the questions you had.
  - author: Albert
    email: albert.lash@savonix.com
    date: 03/06/2009 08:33:40 AM
    text: >
      Well, it certainly gives me a lot to think about! Seriously though, its interesting to read your thoughts about these various licenses. Its something I've put a lot of thought into and still feel like I'm just scratching the surface.<br/><br/>What do you think about the Affero GPL v3? I use it for most of my projects, though I also use the LGPL and MIT/BSD licenses too.<br/><br/>Your point about Mac OS X with its unix core is why I liked it so much before I got frustrated with all the widgets. I've actually been tinkering with PureDarwin a little too:<br/><br/><a href="http://www.osxcentral.com/blog/2009/02/28/puredarwin/" rel="nofollow">http://www.osxcentral.com/blog/2009/02/28/puredarwin/</a><br/><br/>I liked Windows 2000 and DOS, but that's all I'll say about that. :-)
  - author: Bert JW Regeer
    email: xistence@gmail.com
    url: http://personal.x-istence.com/
    date: 03/07/2009 06:35:49 AM
    text: >
      I have not yet had experience with the Affero GPL v3, however I am strongly opposed to GPLv3. I have the same stance that the various different BSD projects are taking (FreeBSD for example won't include GPLv3 stuff in the ports tree, nor has GCC been updated to a GPLv3 version instead they are now maintaining a GPLv2 version). As I mentioned before, BSD license/MPL are the ones I generally use. I wrote the code, I want people to use it, with as little restrictions as possible being put down by me. I've thought of using PHK's Beerware license!<br/><br/>Too many political wars have been started in the community over licenses, and it is a shame, I believe that human knowledge belongs to the world (Yes, shamelessly stolen from a movie (Antitrust), have you seen it?). So much good code is not being used, or being thrown away because people disagree on how it is to be distributed/accredited. Public domain would be nice, but we all want some control, some way to make sure we can't get "hurt" by putting the work we have created out there for others to use. We want to get some sort of recognition as well.<br/><br/>The thing that draws me to Mac OS X is not the flare, not the UI (other than the fact that short cuts are system wide, which is absolutely fantastic), it is the stability, which is just unparalleled in Windows and or open source operating systems.<br/><br/>Puredarwin is interesting, I had heard of it before, but not really read much about it. Definitely something I will keep my eye on for the future.
date: 2009-03-04
---
ZFS continues to get so much attention, its really bewildering to me that Sun doesn't release it under a GPL compatible license. I mean, why bother open sourcing it if so many people won't bother using it because it will never make it into the mainline kernel?

Its already gotten a warm welcome from Mac OS X and FreeBSD, and I'd guess that more people would be willing to venture further into OpenSolaris if they had positive experiences with ZFS.

Meanwhile, btrfs is coming along, and will probably be done by the time the Sun executives figure out that they should release ZFS under the GPL. Oh well.

¥

