<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">The Magic of mod rewrite and RewriteMap and Alternatives</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2009/07/the-magic-of-mod-rewrite-and-rewritemap-and-alternatives/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2009/07/the-magic-of-mod-rewrite-and-rewritemap-and-alternatives/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>The Magic of mod rewrite and RewriteMap and Alternatives</h2><div class="blogPostDate">July 18th, 2009</div><div><p>This is by far one of my favorite features of Apache. I use it for a variety of tasks, but mainly for managing url redirection.</p>
<p>As my sites change through the ages, the url structures change a little as well. I like to support inbound links, and to do so I use mod_rewrite to do so.</p>
<p>More specifically, I use mod_rewrite's RewriteMap function and its ability to read Berkeley database files. Its fast, easy, and reliable.</p>
<p>However, I have started to consider using NGINX and its built in rewrite capability as well as lighttpd and its mod_magnet (Lua) capacity. This has become more of an issue lately as I've switched from using the worker mpm to the prefork mpm, so every request to Apache makes a more significant impact to the server workload.</p>
<p><b>NGINX Rewrite</b>
I already use NGINX, so that is already take care of. However, NGINX takes a plain text file as the rewrite map and compiles it into a hash upon start. I don't feel that is optimal but I'm not aware of any internal options for NGINX. By internal I mean without using of a FastCGI process or anything. Actually the perl module might work, but I've never gotten that to work at all, yet. Maybe its time to try again! Honestly I wish NGINX had built-in Lua instead of Perl - we already have mod_perl for Apache.</p>
<p><b>Lighttpd's mod_magnet</b>
This could be just what the doctor ordered, but for some strange reason I never embraced Lighttpd. I've tried it a bunch of times without any issues, but haven't yet used it in a production environment. Maybe its time to do so? If mod_magnet does what I'd like it to, that is. UPDATE - I just tried this (installed lighttpd and lighttpd-mod-magnet on debian and manually built lua tinycdb) and it will work great. :-)</p>
<p>But wait! There are more options!</p>
<p><b>AOLServer4 and TCL
</b>For another unknown reason, I've always really liked AOLServer. It is an incredible software application and for whatever reason it isn't widely popular. Its had incredible features for many moons and might actually be the right choice for me. It has TCL (the command language) built-in, and there is a TCL library for accessing CDB (constant database) files available in Debian. Hmmmm - very interesting, this merits more research!</p>
<p>UPDATE - I tried this out and it will work as well. :-) This will probably be heavier and slower than Lighttpd and mod_magnet, but it has the upside of having all the dependencies available in the debian repositories.</p>
<p><b>qHttpd and Lua</b>
qHttpd also supports Lua hooks which is very very cool. I'm a big fan of qDecoder, so this might be the right choice too. Its not available in Debian yet though.</p>
<p>¥</p></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2009/07/the-magic-of-mod-rewrite-and-rewritemap-and-alternatives/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>