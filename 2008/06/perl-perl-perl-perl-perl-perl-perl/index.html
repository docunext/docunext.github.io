<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.742409eb857ab2ccca34.css" data-identity="gatsby-global-css">li{margin-right:1rem}h1,li{display:inline-block}h1{font-style:normal;margin-top:0}header{margin-bottom:1.5rem}header ul{float:right;list-style:none}#wrapper{margin:3em auto;max-width:700px;padding:10px}.blogPostDate{color:#333;font-size:8pt;margin-bottom:9px;padding-top:4px}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">Perl Perl Perl Perl Perl Perl Perl</title><link data-react-helmet="true" rel="canonical" href="https://www.docunext.com/2008/06/perl-perl-perl-perl-perl-perl-perl/"/><link as="script" rel="preload" href="/webpack-runtime-910253975eed29c257e8.js"/><link as="script" rel="preload" href="/framework-e27ef662c918f795a5a3.js"/><link as="script" rel="preload" href="/app-578f356f1ad3d3b2b65e.js"/><link as="script" rel="preload" href="/commons-bbb2797d08d51fd1bd26.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"/><link as="fetch" rel="preload" href="/page-data/2008/06/perl-perl-perl-perl-perl-perl-perl/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2191495970.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4224293195.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="wrapper"><header><ul><li><a href="/about/">About</a></li></ul><a href="/"><h1>Docunext</h1></a></header><hr/><div><h2>Perl Perl Perl Perl Perl Perl Perl</h2><div class="blogPostDate">June 21st, 2008</div><div><p>Yup. My world is currently consumed by Perl.</p>
<h4>References</h4>
<p>I think I've finally figured out what's up with references. In PHP, stuff gets created and destroyed on most requests, so there isn't as much opportunity for stuff to persist. When using mod_perl, object can get created, and <em>saved</em>, for future use. In that case, its helpful to keep the objects organized, and to do so I've been using hash references. Why? Well hash references are better than having to copy the object, using twice as much memory. While there is more to it, I've been thinking about references as "bookmarks", "shortcuts", "aliases" or "symbolic links" to the real object. Is this what a pointer is in C? Hope so! That would make a lot of sense.</p>
<p>For example, let's say we're working on a program to manage a school. We've got some data, some interfaces, yada yada yada. We start up our program, and we create a few classrooms:</p>
<pre>
SCHOOL -&gt; CLASSROOM -&gt; 1

SCHOOL -&gt; CLASSROOM -&gt; 2

SCHOOL -&gt; CLASSROOM -&gt; 3</pre>
<p>Then we assign a teacher to a classroom:</p>
<pre>
SCHOOL -&gt; CLASSROOM -&gt; 1 -&gt; Mrs. Crabapple</pre>
<p>So far so good, you still with me? Well let's say we have some information about Mrs. Crabapple. What subject does she teach? Perl programming, OK? Bear with me.</p>
<p>In our program, we're doing something which requires us to find out that information, and maybe some other stuff too. We need to access Mrs. Crabapple's record in relation to the classroom she's in. We use the path previously described:</p>
<pre>
SCHOOL -&gt; CLASSROOM -&gt; 1 -&gt; Mrs. Crabapple</pre>
<p>That's pretty lengthy, huh? Well its worth it, because when you start to have a program running for awhile, its going to have created a lot of objects in memory, and keeping them systematically organized and logically accessible is tantamount. But does that mean we have to keep typing out that long string to get to Mrs. Crabapple's file? NO! Of course not, that would be too difficult. Let's use a reference!</p>
<p>Now here's some perl, the syntax is a little more involved than the pseudo-code above:</p>
<pre lang="perl">$room_teacher = $school-&gt;{ CLASSROOM }-&gt;{ 1 }-&gt;-{ TEACHER }-&gt;{ crabapple }</pre>
<p>In this case, "room_teacher" is the reference. We can then access information about crabapple without having to use the full monty. OK.... what's the big deal. Without knowing too much about perl, persistence, objects, and so on, I often found myself doing this:</p>
<pre lang="perl">
my $room_teacher = $school-&gt;{ CLASSROOM }-&gt;{ 1 }-{ TEACHER }-&gt;{ crabapple }</pre>
<p>The "my" at the beginning tells perl that I want to create something new, called room_teacher, and to fill it with crabapple - in essence, a copy, after which we have two crabapples, requiring twice as much memory.</p>
<p>Don't get me wrong, this <strong><em>has</em></strong> to be done from time to time. When deciding whether or not to use a reference or not, I ask myself:</p>
<ul><li>Am I going to change this and want to leave the original alone?</li><li>Am I dealing with a regular ( non- singleton ) object?</li><li>Is the original likely to change during the scope of my dealings with it, but I need its characteristics to remain the same which I'm interacting with it?</li></ul>
<p>If I can answer yes to all three, I'll try to use a reference.</p>
<p>Since I don't feel 100% comfortable in my understanding of references, my programs still crash or behave erratically as I add or omit "my" here and there. And I welcome some comments or feedback on the above diatribe on perl references.</p>
<h4>Singletons</h4>
<p>In PHP, I've used singleton classes, but now in mod_perl, they really make sense. I've been thinking of it like this: if there is an object I want to create and be the only one during the creation of your program, a singleton is the way to go. Why would I want to do this? Again its sort of a question of references and memory. If objects of a class will always be or should always be the same, I don't need to create new copies of itself, and worrying about keeping the other copies in-sync. If an object of a class already exists, the class will simply only dish out references to that original object. Thankfully the usefulness of this practice has been recognized, and doing this is pretty simple nowadays.</p>
<p>Alright, I'll give an example. An easy one is a program's configuration. A running program usually only has one way to be configured, so there is no need to have several configurations being created during the life of the program. It can definitely be modified during the running of the program, but there should only be one active version of the configuration at any time. Compare this with the classroom objects I wrote about earlier in the references part. There is a class called classroom, create an object from it called classroom 1, give it some characteristics, then create another classroom object, and give it some different characteristics. Yes, that is logical, it makes sense to have multiple instances of classes, but with a configuration, I only want one.</p>
<h4>Callbacks</h4>
<p>This is the next step of my progress in perl / mod_perl. Again I've used callbacks in PHP, but I just found <a href="http://search.cpan.org/perldoc?Params::CallbackRequest">Params::CallbackRequest</a> which explains callbacks in a different light when it comes to shared memory:</p>
<blockquote>
<p>If you run your templating system under mod_perl, callbacks are just Perl subroutines in modules loaded at server startup time. Thus the memory they consume is all in the Apache parent process, and shared by the child processes. For code that executes frequently, this can be much less resource-intensive than code in templates, since templates are loaded separately in each Apache child process on demand.</blockquote></p>
<p>That sounds great, but I'm still learning about the intricacies of shared memory with mod_perl 2.0 and apache2-mpm-worker, so I'm not sure if it will affect the program I'm working on. I'm hoping that by creating some of the sub-routines I'm using as callbacks, they'll consume less memory. At this point, I'm still foggy on the scenario, so I'll start experimenting and include my findings here.</p>
<p>¥</p></div></div><div><span>Yearly Indexes: </span><span><a href="/2003/"><span>2003</span></a> </span><span><a href="/2004/"><span>2004</span></a> </span><span><a href="/2006/"><span>2006</span></a> </span><span><a href="/2007/"><span>2007</span></a> </span><span><a href="/2008/"><span>2008</span></a> </span><span><a href="/2009/"><span>2009</span></a> </span><span><a href="/2010/"><span>2010</span></a> </span><span><a href="/2011/"><span>2011</span></a> </span><span><a href="/2012/"><span>2012</span></a> </span><span><a href="/2013/"><span>2013</span></a> </span><span><a href="/2015/"><span>2015</span></a> </span><span><a href="/2019/"><span>2019</span></a> </span><span><a href="/2020/"><span>2020</span></a> </span><span><a href="/2022/"><span>2022</span></a> </span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2008/06/perl-perl-perl-perl-perl-perl-perl/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9068a959998310636008.js"],"app":["/app-578f356f1ad3d3b2b65e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-738961a9611f9aa4e8d4.js"],"component---src-pages-games-react-nuzaq-js":["/component---src-pages-games-react-nuzaq-js-50d5da494a82a1aaeb8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3aa2421409c5653df938.js"],"component---src-pages-years-js":["/component---src-pages-years-js-d36f319c6c16ef9e8314.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js"],"component---src-templates-year-js":["/component---src-templates-year-js-e8af3ddab603f61c6142.js"]};/*]]>*/</script><script src="/polyfill-9068a959998310636008.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-cc8ebf9459c2ce2cf980.js" async=""></script><script src="/commons-bbb2797d08d51fd1bd26.js" async=""></script><script src="/app-578f356f1ad3d3b2b65e.js" async=""></script><script src="/framework-e27ef662c918f795a5a3.js" async=""></script><script src="/webpack-runtime-910253975eed29c257e8.js" async=""></script></body></html>